---
alwaysApply: true
---

# Web-Antd æƒé™ç³»ç»Ÿè®¾è®¡åˆ†æ

## ğŸ“‹ ç›®å½•

1. [æƒé™ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ](#æƒé™ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ)
2. [è·¯ç”±æƒé™è®¾è®¡](#è·¯ç”±æƒé™è®¾è®¡)
3. [æŒ‰é’®æƒé™è®¾è®¡](#æŒ‰é’®æƒé™è®¾è®¡)
4. [è§’è‰²æƒé™è®¾è®¡](#è§’è‰²æƒé™è®¾è®¡)
5. [æƒé™ç æƒé™è®¾è®¡](#æƒé™ç æƒé™è®¾è®¡)
6. [æƒé™æ¨¡å¼ï¼ˆå‰ç«¯/åç«¯ï¼‰](#æƒé™æ¨¡å¼å‰åç«¯)
7. [æ ¸å¿ƒç»„ä»¶ä¸ API](#æ ¸å¿ƒç»„ä»¶ä¸-api)
8. [å®é™…ä½¿ç”¨ç¤ºä¾‹](#å®é™…ä½¿ç”¨ç¤ºä¾‹)

---

## æƒé™ç³»ç»Ÿæ¶æ„æ¦‚è§ˆ

Vue Vben Admin çš„æƒé™ç³»ç»Ÿé‡‡ç”¨**å¤šå±‚çº§æƒé™æ§åˆ¶**è®¾è®¡ï¼Œæ”¯æŒï¼š

- âœ… **è·¯ç”±æƒé™**ï¼šæ§åˆ¶é¡µé¢è®¿é—®
- âœ… **æŒ‰é’®æƒé™**ï¼šæ§åˆ¶æŒ‰é’®/ç»„ä»¶æ˜¾ç¤º
- âœ… **è§’è‰²æƒé™**ï¼šåŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰
- âœ… **æƒé™ç æƒé™**ï¼šåŸºäºæƒé™ç çš„ç»†ç²’åº¦æ§åˆ¶

### æƒé™ç³»ç»Ÿæµç¨‹å›¾

```
ç”¨æˆ·ç™»å½•
  â†“
è·å– accessToken
  â†“
è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å« rolesï¼‰
  â†“
è·å–æƒé™ç åˆ—è¡¨ï¼ˆaccessCodesï¼‰
  â†“
è·¯ç”±å®ˆå«æ‹¦æˆª
  â†“
ç”Ÿæˆå¯è®¿é—®è·¯ç”±ï¼ˆæ ¹æ® roles æˆ–åç«¯èœå•ï¼‰
  â†“
ç”Ÿæˆå¯è®¿é—®èœå•
  â†“
é¡µé¢æ¸²æŸ“
  â†“
ç»„ä»¶/æŒ‰é’®æƒé™æ£€æŸ¥ï¼ˆv-access æŒ‡ä»¤ï¼‰
```

---

## è·¯ç”±æƒé™è®¾è®¡

### 1. è·¯ç”±å®ˆå«æœºåˆ¶

è·¯ç”±æƒé™é€šè¿‡ `router/guard.ts` ä¸­çš„ `setupAccessGuard` å®ç°ï¼š

```typescript:47:120:apps/web-antd/src/router/guard.ts
function setupAccessGuard(router: Router) {
  router.beforeEach(async (to, from) => {
    const accessStore = useAccessStore();
    const userStore = useUserStore();
    const authStore = useAuthStore();

    // åŸºæœ¬è·¯ç”±ï¼Œè¿™äº›è·¯ç”±ä¸éœ€è¦è¿›å…¥æƒé™æ‹¦æˆª
    if (coreRouteNames.includes(to.name as string)) {
      if (to.path === LOGIN_PATH && accessStore.accessToken) {
        return decodeURIComponent(
          (to.query?.redirect as string) ||
            userStore.userInfo?.homePath ||
            preferences.app.defaultHomePath,
        );
      }
      return true;
    }

    // accessToken æ£€æŸ¥
    if (!accessStore.accessToken) {
      // æ˜ç¡®å£°æ˜å¿½ç•¥æƒé™è®¿é—®æƒé™ï¼Œåˆ™å¯ä»¥è®¿é—®
      if (to.meta.ignoreAccess) {
        return true;
      }

      // æ²¡æœ‰è®¿é—®æƒé™ï¼Œè·³è½¬ç™»å½•é¡µé¢
      if (to.fullPath !== LOGIN_PATH) {
        return {
          path: LOGIN_PATH,
          query:
            to.fullPath === preferences.app.defaultHomePath
              ? {}
              : { redirect: encodeURIComponent(to.fullPath) },
          replace: true,
        };
      }
      return to;
    }

    // æ˜¯å¦å·²ç»ç”Ÿæˆè¿‡åŠ¨æ€è·¯ç”±
    if (accessStore.isAccessChecked) {
      return true;
    }

    // ç”Ÿæˆè·¯ç”±è¡¨
    // å½“å‰ç™»å½•ç”¨æˆ·æ‹¥æœ‰çš„è§’è‰²æ ‡è¯†åˆ—è¡¨
    const userInfo = userStore.userInfo || (await authStore.fetchUserInfo());
    const userRoles = userInfo.roles ?? [];

    // ç”Ÿæˆèœå•å’Œè·¯ç”±
    const { accessibleMenus, accessibleRoutes } = await generateAccess({
      roles: userRoles,
      router,
      routes: accessRoutes,
    });

    // ä¿å­˜èœå•ä¿¡æ¯å’Œè·¯ç”±ä¿¡æ¯
    accessStore.setAccessMenus(accessibleMenus);
    accessStore.setAccessRoutes(accessibleRoutes);
    accessStore.setIsAccessChecked(true);
    const redirectPath = (from.query.redirect ??
      (to.path === preferences.app.defaultHomePath
        ? userInfo.homePath || preferences.app.defaultHomePath
        : to.fullPath)) as string;

    return {
      ...router.resolve(decodeURIComponent(redirectPath)),
      replace: true,
    };
  });
}
```

### 2. è·¯ç”±æƒé™é…ç½®

åœ¨è·¯ç”±é…ç½®ä¸­ï¼Œé€šè¿‡ `meta.authority` å­—æ®µæ§åˆ¶æƒé™ï¼š

```typescript
const routes: RouteRecordRaw[] = [
  {
    path: '/system/role',
    name: 'SystemRole',
    meta: {
      title: 'è§’è‰²ç®¡ç†',
      // éœ€è¦æ‹¥æœ‰ 'admin' æˆ– 'system:role:view' è§’è‰²æ‰èƒ½è®¿é—®
      authority: ['admin', 'system:role:view'],
    },
    component: () => import('#/views/system/role/list.vue'),
  },
];
```

### 3. è·¯ç”±æƒé™åˆ¤æ–­é€»è¾‘

**å‰ç«¯æ¨¡å¼**ï¼ˆ`accessMode: 'frontend'`ï¼‰ï¼š
- æ ¹æ®ç”¨æˆ·è§’è‰²ï¼ˆ`userRoles`ï¼‰è¿‡æ»¤è·¯ç”±
- ä½¿ç”¨ `hasAuthority` å‡½æ•°åˆ¤æ–­è·¯ç”±æ˜¯å¦æœ‰æƒé™

```typescript:36:44:packages/utils/src/helpers/generate-routes-frontend.ts
function hasAuthority(route: RouteRecordRaw, access: string[]) {
  const authority = route.meta?.authority;
  if (!authority) {
    return true;
  }
  const canAccess = access.some((value) => authority.includes(value));

  return canAccess || (!canAccess && menuHasVisibleWithForbidden(route));
}
```

**åç«¯æ¨¡å¼**ï¼ˆ`accessMode: 'backend'`ï¼‰ï¼š
- ä»åç«¯è·å–èœå•åˆ—è¡¨
- åç«¯è¿”å›çš„èœå•å³ä¸ºå¯è®¿é—®çš„è·¯ç”±

### 4. ç‰¹æ®Šè·¯ç”±é…ç½®

- **`ignoreAccess: true`**ï¼šå¿½ç•¥æƒé™æ£€æŸ¥ï¼Œç›´æ¥å¯è®¿é—®
- **`menuVisibleWithForbidden: true`**ï¼šèœå•å¯è§ï¼Œä½†è®¿é—®æ—¶è·³è½¬åˆ° 403 é¡µé¢
- **æ ¸å¿ƒè·¯ç”±**ï¼šç™»å½•ã€404 ç­‰åŸºç¡€è·¯ç”±ï¼Œä¸èµ°æƒé™æ‹¦æˆª

---

## æŒ‰é’®æƒé™è®¾è®¡

### 1. æƒé™æŒ‡ä»¤ `v-access`

æ¡†æ¶æä¾›äº† `v-access` æŒ‡ä»¤ç”¨äºæ§åˆ¶æŒ‰é’®/ç»„ä»¶çš„æ˜¾ç¤ºï¼š

```vue
<script setup lang="ts">
// æƒé™æŒ‡ä»¤ä¼šè‡ªåŠ¨æ³¨å†Œï¼Œæ— éœ€æ‰‹åŠ¨å¯¼å…¥
</script>

<template>
  <!-- åŸºäºè§’è‰²æ§åˆ¶ -->
  <button v-access:role="'admin'">ç®¡ç†å‘˜æŒ‰é’®</button>
  <button v-access:role="['admin', 'editor']">ç¼–è¾‘æŒ‰é’®</button>

  <!-- åŸºäºæƒé™ç æ§åˆ¶ -->
  <button v-access:code="'user:add'">æ·»åŠ ç”¨æˆ·</button>
  <button v-access:code="['user:add', 'user:edit']">æ“ä½œæŒ‰é’®</button>
</template>
```

### 2. æƒé™æŒ‡ä»¤å®ç°

```typescript:11:30:packages/effects/access/src/directive.ts
function isAccessible(
  el: Element,
  binding: DirectiveBinding<string | string[]>,
) {
  const { accessMode, hasAccessByCodes, hasAccessByRoles } = useAccess();

  const value = binding.value;

  if (!value) return;
  const authMethod =
    accessMode.value === 'frontend' && binding.arg === 'role'
      ? hasAccessByRoles
      : hasAccessByCodes;

  const values = Array.isArray(value) ? value : [value];

  if (!authMethod(values)) {
    el?.remove();
  }
}
```

**å·¥ä½œåŸç†**ï¼š
1. æ ¹æ® `accessMode` å’ŒæŒ‡ä»¤å‚æ•°ï¼ˆ`role`/`code`ï¼‰é€‰æ‹©æƒé™åˆ¤æ–­æ–¹æ³•
2. å¦‚æœç”¨æˆ·æ²¡æœ‰æƒé™ï¼Œç›´æ¥ç§»é™¤ DOM å…ƒç´ 

### 3. AccessControl ç»„ä»¶

é™¤äº†æŒ‡ä»¤ï¼Œè¿˜æä¾›äº† `AccessControl` ç»„ä»¶ï¼š

```vue
<script setup lang="ts">
import { AccessControl } from '@vben/access';
</script>

<template>
  <AccessControl :codes="['user:add']" type="code">
    <button>æ·»åŠ ç”¨æˆ·</button>
  </AccessControl>

  <AccessControl :codes="['admin']" type="role">
    <button>ç®¡ç†å‘˜æ“ä½œ</button>
  </AccessControl>
</template>
```

---

## è§’è‰²æƒé™è®¾è®¡

### 1. è§’è‰²å­˜å‚¨

ç”¨æˆ·è§’è‰²å­˜å‚¨åœ¨ `useUserStore` ä¸­ï¼š

```typescript:24:61:packages/stores/src/modules/user.ts
interface AccessState {
  /**
   * ç”¨æˆ·ä¿¡æ¯
   */
  userInfo: BasicUserInfo | null;
  /**
   * ç”¨æˆ·è§’è‰²
   */
  userRoles: string[];
}

export const useUserStore = defineStore('core-user', {
  actions: {
    setUserInfo(userInfo: BasicUserInfo | null) {
      // è®¾ç½®ç”¨æˆ·ä¿¡æ¯
      this.userInfo = userInfo;
      // è®¾ç½®è§’è‰²ä¿¡æ¯
      const roles = userInfo?.roles ?? [];
      this.setUserRoles(roles);
    },
    setUserRoles(roles: string[]) {
      this.userRoles = roles;
    },
  },
  state: (): AccessState => ({
    userInfo: null,
    userRoles: [],
  }),
});
```

### 2. è§’è‰²æƒé™åˆ¤æ–­

é€šè¿‡ `useAccess` ç»„åˆå¼å‡½æ•°åˆ¤æ–­è§’è‰²æƒé™ï¼š

```typescript:18:22:packages/effects/access/src/use-access.ts
function hasAccessByRoles(roles: string[]) {
  const userRoleSet = new Set(userStore.userRoles);
  const intersection = roles.filter((item) => userRoleSet.has(item));
  return intersection.length > 0;
}
```

**åˆ¤æ–­é€»è¾‘**ï¼š
- ç”¨æˆ·è§’è‰²ä¸æ‰€éœ€è§’è‰²æœ‰äº¤é›† â†’ æœ‰æƒé™
- æ— äº¤é›† â†’ æ— æƒé™

### 3. è§’è‰²è·å–æµç¨‹

```typescript:28:78:apps/web-antd/src/store/auth.ts
async function authLogin(
  params: Recordable<any>,
  onSuccess?: () => Promise<void> | void,
) {
  let userInfo: null | UserInfo = null;
  try {
    loginLoading.value = true;
    const { accessToken } = await loginApi(params);

    if (accessToken) {
      accessStore.setAccessToken(accessToken);

      // è·å–ç”¨æˆ·ä¿¡æ¯å¹¶å­˜å‚¨åˆ° accessStore ä¸­
      const [fetchUserInfoResult, accessCodes] = await Promise.all([
        fetchUserInfo(),
        getAccessCodesApi(),
      ]);

      userInfo = fetchUserInfoResult;

      userStore.setUserInfo(userInfo);
      accessStore.setAccessCodes(accessCodes);
      // ...
    }
  } finally {
    loginLoading.value = false;
  }

  return {
    userInfo,
  };
}
```

---

## æƒé™ç æƒé™è®¾è®¡

### 1. æƒé™ç å­˜å‚¨

æƒé™ç å­˜å‚¨åœ¨ `useAccessStore` ä¸­ï¼š

```typescript:7:46:packages/stores/src/modules/access.ts
interface AccessState {
  /**
   * æƒé™ç 
   */
  accessCodes: string[];
  /**
   * å¯è®¿é—®çš„èœå•åˆ—è¡¨
   */
  accessMenus: MenuRecordRaw[];
  /**
   * å¯è®¿é—®çš„è·¯ç”±åˆ—è¡¨
   */
  accessRoutes: RouteRecordRaw[];
  /**
   * ç™»å½• accessToken
   */
  accessToken: AccessToken;
  /**
   * æ˜¯å¦å·²ç»æ£€æŸ¥è¿‡æƒé™
   */
  isAccessChecked: boolean;
  // ...
}
```

### 2. æƒé™ç è·å–

é€šè¿‡ API è·å–ç”¨æˆ·æƒé™ç ï¼š

```typescript:47:51:apps/web-antd/src/api/core/auth.ts
/**
 * è·å–ç”¨æˆ·æƒé™ç 
 */
export async function getAccessCodesApi() {
  return requestClient.get<string[]>('/auth/codes');
}
```

### 3. æƒé™ç åˆ¤æ–­

```typescript:29:34:packages/effects/access/src/use-access.ts
function hasAccessByCodes(codes: string[]) {
  const userCodesSet = new Set(accessStore.accessCodes);

  const intersection = codes.filter((item) => userCodesSet.has(item));
  return intersection.length > 0;
}
```

**åˆ¤æ–­é€»è¾‘**ï¼š
- ç”¨æˆ·æƒé™ç ä¸æ‰€éœ€æƒé™ç æœ‰äº¤é›† â†’ æœ‰æƒé™
- æ— äº¤é›† â†’ æ— æƒé™

---

## æƒé™æ¨¡å¼ï¼ˆå‰ç«¯/åç«¯ï¼‰

### 1. å‰ç«¯æ¨¡å¼ï¼ˆ`accessMode: 'frontend'`ï¼‰

**ç‰¹ç‚¹**ï¼š
- è·¯ç”±é…ç½®åœ¨å‰ç«¯å®šä¹‰
- æ ¹æ®ç”¨æˆ·è§’è‰²è¿‡æ»¤è·¯ç”±
- èœå•æ ¹æ®è·¯ç”±è‡ªåŠ¨ç”Ÿæˆ

**é€‚ç”¨åœºæ™¯**ï¼š
- æƒé™ç›¸å¯¹å›ºå®š
- å‰ç«¯éœ€è¦å®Œå…¨æ§åˆ¶è·¯ç”±ç»“æ„

**é…ç½®**ï¼š
```typescript
// preferences.ts
import { definePreferences } from '@vben/preferences';

export default definePreferences({
  app: {
    accessMode: 'frontend',
  },
});
```

### 2. åç«¯æ¨¡å¼ï¼ˆ`accessMode: 'backend'`ï¼‰

**ç‰¹ç‚¹**ï¼š
- è·¯ç”±/èœå•ä»åç«¯è·å–
- åç«¯è¿”å›çš„èœå•å³ä¸ºå¯è®¿é—®çš„è·¯ç”±
- æ›´çµæ´»ï¼Œæƒé™å®Œå…¨ç”±åç«¯æ§åˆ¶

**é€‚ç”¨åœºæ™¯**ï¼š
- æƒé™åŠ¨æ€å˜åŒ–
- éœ€è¦åç«¯ç»Ÿä¸€ç®¡ç†æƒé™

**é…ç½®**ï¼š
```typescript
// preferences.ts
import { definePreferences } from '@vben/preferences';

export default definePreferences({
  app: {
    accessMode: 'backend',
  },
});
```

**åç«¯èœå• API**ï¼š
```typescript:8:10:apps/web-antd/src/api/core/menu.ts
export async function getAllMenusApi() {
  return requestClient.get<RouteRecordStringComponent[]>('/menu/all');
}
```

### 3. æƒé™ç”Ÿæˆé€»è¾‘

```typescript:17:40:apps/web-antd/src/router/access.ts
async function generateAccess(options: GenerateMenuAndRoutesOptions) {
  const pageMap: ComponentRecordType = import.meta.glob('../views/**/*.vue');

  const layoutMap: ComponentRecordType = {
    BasicLayout,
    IFrameView,
  };

  return await generateAccessible(preferences.app.accessMode, {
    ...options,
    fetchMenuListAsync: async () => {
      message.loading({
        content: `${$t('common.loadingMenu')}...`,
        duration: 1.5,
      });
      return await getAllMenusApi();
    },
    forbiddenComponent,
    layoutMap,
    pageMap,
  });
}
```

---

## æ ¸å¿ƒç»„ä»¶ä¸ API

### 1. Store

#### `useAccessStore` - æƒé™çŠ¶æ€ç®¡ç†
- `accessToken`: ç™»å½•ä»¤ç‰Œ
- `accessCodes`: æƒé™ç åˆ—è¡¨
- `accessMenus`: å¯è®¿é—®èœå•
- `accessRoutes`: å¯è®¿é—®è·¯ç”±
- `isAccessChecked`: æ˜¯å¦å·²æ£€æŸ¥æƒé™

#### `useUserStore` - ç”¨æˆ·ä¿¡æ¯ç®¡ç†
- `userInfo`: ç”¨æˆ·ä¿¡æ¯
- `userRoles`: ç”¨æˆ·è§’è‰²åˆ—è¡¨

#### `useAuthStore` - è®¤è¯ç®¡ç†
- `authLogin()`: ç™»å½•
- `logout()`: ç™»å‡º
- `fetchUserInfo()`: è·å–ç”¨æˆ·ä¿¡æ¯

### 2. ç»„åˆå¼å‡½æ•°

#### `useAccess()` - æƒé™åˆ¤æ–­å·¥å…·
```typescript
import { useAccess } from '@vben/access';

const {
  accessMode,          // æƒé™æ¨¡å¼
  hasAccessByCodes,   // åŸºäºæƒé™ç åˆ¤æ–­
  hasAccessByRoles,    // åŸºäºè§’è‰²åˆ¤æ–­
  toggleAccessMode,    // åˆ‡æ¢æƒé™æ¨¡å¼
} = useAccess();
```

### 3. API

```typescript
// å¯¼å…¥ API å‡½æ•°
import {
  loginApi,
  getUserInfoApi,
  getAccessCodesApi,
  getAllMenusApi,
} from '#/api';

// API å‡½æ•°è¯´æ˜
// - loginApi(params): ç™»å½•
// - getUserInfoApi(): è·å–ç”¨æˆ·ä¿¡æ¯
// - getAccessCodesApi(): è·å–æƒé™ç 
// - getAllMenusApi(): è·å–æ‰€æœ‰èœå•ï¼ˆåç«¯æ¨¡å¼ï¼‰
```

---

## å®é™…ä½¿ç”¨ç¤ºä¾‹

### 1. è·¯ç”±æƒé™é…ç½®

```typescript
// router/routes/modules/system.ts
const routes: RouteRecordRaw[] = [
  {
    path: '/system/role',
    name: 'SystemRole',
    meta: {
      title: 'è§’è‰²ç®¡ç†',
      // éœ€è¦ admin æˆ– system:role:view è§’è‰²
      authority: ['admin', 'system:role:view'],
    },
    component: () => import('#/views/system/role/list.vue'),
  },
];
```

### 2. æŒ‰é’®æƒé™æ§åˆ¶

```vue
<script setup lang="ts">
import { AccessControl } from '@vben/access';
import { Button as AButton } from 'ant-design-vue';

function handleAdd() {
  // æ–°å¢é€»è¾‘
}

function handleDelete() {
  // åˆ é™¤é€»è¾‘
}

function handleEdit() {
  // ç¼–è¾‘é€»è¾‘
}
</script>

<template>
  <div>
    <!-- ä½¿ç”¨æŒ‡ä»¤ -->
    <a-button
      v-access:code="'system:role:add'"
      type="primary"
      @click="handleAdd"
    >
      æ–°å¢è§’è‰²
    </a-button>

    <a-button
      v-access:role="'admin'"
      danger
      @click="handleDelete"
    >
      åˆ é™¤
    </a-button>

    <!-- ä½¿ç”¨ç»„ä»¶ -->
    <AccessControl :codes="['system:role:edit']" type="code">
      <a-button @click="handleEdit">ç¼–è¾‘</a-button>
    </AccessControl>
  </div>
</template>
```

### 3. ç¼–ç¨‹å¼æƒé™åˆ¤æ–­

```vue
<script setup lang="ts">
import { message } from 'ant-design-vue';
import { useAccess } from '@vben/access';

const { hasAccessByCodes, hasAccessByRoles } = useAccess();

// åˆ¤æ–­æ˜¯å¦æœ‰æƒé™
const canAdd = hasAccessByCodes(['system:role:add']);
const isAdmin = hasAccessByRoles(['admin']);

function handleAction() {
  if (!canAdd) {
    message.warning('æ‚¨æ²¡æœ‰æ·»åŠ æƒé™');
    return;
  }
  // æ‰§è¡Œæ“ä½œ
}
</script>
```

### 4. è·¯ç”±å®ˆå«ä¸­çš„æƒé™æ£€æŸ¥

```typescript
// åœ¨è·¯ç”±å®ˆå«ä¸­ï¼Œæƒé™æ£€æŸ¥æ˜¯è‡ªåŠ¨çš„
// åªéœ€è¦åœ¨è·¯ç”±é…ç½®ä¸­è®¾ç½® meta.authority
// æ¡†æ¶ä¼šè‡ªåŠ¨è¿‡æ»¤æ— æƒé™çš„è·¯ç”±
```

---

## æ€»ç»“

Vue Vben Admin çš„æƒé™ç³»ç»Ÿè®¾è®¡ç‰¹ç‚¹ï¼š

1. **å¤šå±‚çº§æ§åˆ¶**ï¼šè·¯ç”±ã€æŒ‰é’®ã€è§’è‰²ã€æƒé™ç å››ä¸ªç»´åº¦
2. **çµæ´»é…ç½®**ï¼šæ”¯æŒå‰ç«¯å’Œåç«¯ä¸¤ç§æƒé™æ¨¡å¼
3. **æ˜“äºä½¿ç”¨**ï¼šæä¾›æŒ‡ä»¤ã€ç»„ä»¶ã€ç»„åˆå¼å‡½æ•°å¤šç§ä½¿ç”¨æ–¹å¼
4. **ç±»å‹å®‰å…¨**ï¼šå®Œæ•´çš„ TypeScript ç±»å‹å®šä¹‰
5. **è‡ªåŠ¨è¿‡æ»¤**ï¼šè·¯ç”±å’Œèœå•è‡ªåŠ¨æ ¹æ®æƒé™è¿‡æ»¤

æƒé™ç³»ç»Ÿæ ¸å¿ƒæµç¨‹ï¼š
1. ç”¨æˆ·ç™»å½• â†’ è·å– token
2. è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆåŒ…å« rolesï¼‰
3. è·å–æƒé™ç åˆ—è¡¨
4. è·¯ç”±å®ˆå«æ‹¦æˆª â†’ ç”Ÿæˆå¯è®¿é—®è·¯ç”±
5. é¡µé¢æ¸²æŸ“ â†’ æŒ‰é’®/ç»„ä»¶æƒé™æ£€æŸ¥
