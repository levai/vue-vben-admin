---
alwaysApply: true
---

# åç«¯å¼€å‘è§„èŒƒ

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯æ ˆåˆ†æ](#æŠ€æœ¯æ ˆåˆ†æ)
2. [é¡¹ç›®æ¶æ„æ¦‚è§ˆ](#é¡¹ç›®æ¶æ„æ¦‚è§ˆ)
3. [Controller å±‚è®¾è®¡](#controller-å±‚è®¾è®¡)
4. [Service å±‚è®¾è®¡](#service-å±‚è®¾è®¡)
5. [æ•°æ®åº“æ“ä½œè®¾è®¡](#æ•°æ®åº“æ“ä½œè®¾è®¡)
6. [API è®¾è®¡è§„èŒƒ](#api-è®¾è®¡è§„èŒƒ)
7. [å¼‚å¸¸å¤„ç†è®¾è®¡](#å¼‚å¸¸å¤„ç†è®¾è®¡)
8. [å‚æ•°æ ¡éªŒè®¾è®¡](#å‚æ•°æ ¡éªŒè®¾è®¡)
9. [å·¥å…·ç±»ä½¿ç”¨è§„èŒƒ](#å·¥å…·ç±»ä½¿ç”¨è§„èŒƒ)
10. [å®é™…ä½¿ç”¨ç¤ºä¾‹](#å®é™…ä½¿ç”¨ç¤ºä¾‹)
11. [åç»­å¼€å‘æ¨¡å¼](#åç»­å¼€å‘æ¨¡å¼)
12. [æœ€ä½³å®è·µå»ºè®®](#æœ€ä½³å®è·µå»ºè®®)

---

## æŠ€æœ¯æ ˆåˆ†æ

> ğŸ“– **è¯¦ç»†æŠ€æœ¯æ ˆåˆ†ææ–‡æ¡£**ï¼šè¯·å‚è€ƒ [`apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md`](../../apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md)

### æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯            | ç‰ˆæœ¬   | ç”¨é€”     | è¯´æ˜               |
| --------------- | ------ | -------- | ------------------ |
| **Spring Boot** | 3.2.0  | æ ¸å¿ƒæ¡†æ¶ | ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶ |
| **Java**        | 17     | ç¼–ç¨‹è¯­è¨€ | LTS ç‰ˆæœ¬ï¼Œç¨³å®šå¯é  |
| **Maven**       | 3.6+   | æ„å»ºå·¥å…· | ä¾èµ–ç®¡ç†å’Œé¡¹ç›®æ„å»º |

### æ•°æ®å±‚

| æŠ€æœ¯             | ç‰ˆæœ¬   | ç”¨é€”         | ç‰¹æ€§                    |
| ---------------- | ------ | ------------ | ----------------------- |
| **MySQL**        | 8.0+   | å…³ç³»å‹æ•°æ®åº“ | ä¸»æ•°æ®åº“                |
| **MyBatis Plus** | 3.5.7  | ORM æ¡†æ¶     | å¢å¼º MyBatisï¼Œç®€åŒ– CRUDï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰ |
| **Druid**        | 1.2.23 | æ•°æ®åº“è¿æ¥æ±  | ç›‘æ§ã€ç»Ÿè®¡ã€SQL é˜²ç«å¢™  |
| **MySQL Connector** | 8.2.0 | MySQL é©±åŠ¨   | ä½¿ç”¨ `mysql-connector-j`ï¼ˆæ›¿ä»£ `mysql-connector-java`ï¼‰ |

**MyBatis Plus ç‰¹æ€§**ï¼š

- âœ… åˆ†é¡µæ’ä»¶ï¼š`PaginationInnerInterceptor`
- âœ… é€»è¾‘åˆ é™¤ï¼š`@TableLogic`ï¼ˆè‡ªåŠ¨è¿‡æ»¤ deleted=1ï¼‰
- âœ… è‡ªåŠ¨å¡«å……ï¼š`FieldFillHandler`ï¼ˆè‡ªåŠ¨å¡«å…… createTimeã€updateTime ç­‰ï¼‰
- âœ… ID ç”Ÿæˆç­–ç•¥ï¼š`assign_id`ï¼ˆé›ªèŠ±ç®—æ³•ï¼‰
- âœ… ç±»å‹å®‰å…¨ï¼š`LambdaQueryWrapper`ï¼ˆé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ï¼‰

### å®‰å…¨è®¤è¯

| æŠ€æœ¯                | ç‰ˆæœ¬   | ç”¨é€”       | é…ç½®           |
| ------------------- | ------ | ---------- | -------------- |
| **Spring Security** | 3.2.0  | å®‰å…¨æ¡†æ¶   | JWT æ— çŠ¶æ€è®¤è¯ï¼ˆè·Ÿéš Spring Boot ç‰ˆæœ¬ï¼‰ |
| **JWT (jjwt)**      | 0.12.5 | Token è®¤è¯ | HS512 ç­¾åç®—æ³• |

**JWT é…ç½®**ï¼š

- **AccessToken**ï¼š2å°æ—¶ï¼ˆ7200000msï¼‰- ç¬¦åˆä¸šç•Œæ ‡å‡†
- **RefreshToken**ï¼š7å¤©ï¼ˆ604800000msï¼‰- ç¬¦åˆä¸šç•Œæ ‡å‡†
- **ç­¾åç®—æ³•**ï¼šHS512ï¼ˆHMAC-SHA512ï¼‰

**Spring Security é…ç½®**ï¼š

- âœ… æ— çŠ¶æ€ Sessionï¼ˆSTATELESSï¼‰
- âœ… JWT è®¤è¯è¿‡æ»¤å™¨ï¼ˆ`JwtAuthenticationFilter`ï¼‰
- âœ… è‡ªå®šä¹‰è®¤è¯å…¥å£ç‚¹ï¼ˆ`CustomAuthenticationEntryPoint`ï¼‰
- âœ… è‡ªå®šä¹‰æ‹’ç»å¤„ç†å™¨ï¼ˆ`CustomAccessDeniedHandler`ï¼‰

### API æ–‡æ¡£

| æŠ€æœ¯        | ç‰ˆæœ¬  | ç”¨é€”     | ç‰¹æ€§             |
| ----------- | ----- | -------- | ---------------- |
| **Knife4j** | 4.4.0 | API æ–‡æ¡£ | åŸºäº SpringDoc OpenAPI 3ï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰ |

**Swagger æ³¨è§£è§„èŒƒ**ï¼ˆSpringDoc OpenAPI 3ï¼‰ï¼š

- Controller ç±»ï¼š`@Tag(name = "...")`ï¼ˆOpenAPI 3.0ï¼Œæ›¿ä»£ Springfox çš„ `@Api`ï¼‰
- Controller æ–¹æ³•ï¼š`@Operation(summary = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- Controller å‚æ•°ï¼š`@Parameter(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- DTO/VO å­—æ®µï¼š`@Schema(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰

**é‡è¦å˜æ›´**ï¼š
- âœ… ä» Springfox è¿ç§»åˆ° SpringDoc OpenAPI 3
- âœ… ä½¿ç”¨ `knife4j-openapi3-jakarta-spring-boot-starter`ï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰
- âœ… æ³¨è§£ä» `javax` åŒ…è¿ç§»åˆ° `jakarta` åŒ…

### å·¥å…·åº“

| æŠ€æœ¯                       | ç‰ˆæœ¬   | ç”¨é€”         | å¸¸ç”¨æ³¨è§£/ç±»                                    |
| -------------------------- | ------ | ------------ | ---------------------------------------------- |
| **Lombok**                 | 1.18.32 | ä»£ç ç”Ÿæˆ     | `@Data`ã€`@RequiredArgsConstructor`ã€`@Slf4j` |
| **Hutool**                 | 5.8.26 | Java å·¥å…·ç±»åº“ | å­—ç¬¦ä¸²ã€æ—¥æœŸã€åŠ å¯†ç­‰å·¥å…·                       |
| **Apache Commons Lang3**   | -      | å·¥å…·ç±»       | å­—ç¬¦ä¸²ã€é›†åˆç­‰å·¥å…·                              |

### å…¶ä»–ä¾èµ–

| æŠ€æœ¯                       | ç‰ˆæœ¬  | ç”¨é€”         | è¯´æ˜                  |
| -------------------------- | ----- | ------------ | --------------------- |
| **Spring Boot Validation** | -     | å‚æ•°æ ¡éªŒ     | Bean Validation       |
| **Spring Boot AOP**        | -     | é¢å‘åˆ‡é¢ç¼–ç¨‹ | æ“ä½œæ—¥å¿—åˆ‡é¢          |
| **JAXB API**               | 4.0.1 | XML ç»‘å®š     | Java 17+ éœ€è¦å•ç‹¬æ·»åŠ ï¼ˆä½¿ç”¨ `jakarta.xml.bind-api`ï¼‰ |

---

## é¡¹ç›®æ¶æ„æ¦‚è§ˆ

Vue Vben Admin åç«¯æœåŠ¡é‡‡ç”¨**æ ‡å‡†åˆ†å±‚æ¶æ„**è®¾è®¡ï¼Œæ”¯æŒï¼š

- âœ… **åˆ†å±‚æ¸…æ™°**ï¼šController â†’ Service â†’ Mapper â†’ Database
- âœ… **ç»Ÿä¸€å“åº”**ï¼š`BaseResult<T>` å’Œ `PageResult<T>`
- âœ… **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ `LambdaQueryWrapper` å’Œæ³›å‹
- âœ… **ä»£ç å¤ç”¨**ï¼šå·¥å…·ç±»å‡å°‘é‡å¤ä»£ç 
- âœ… **RESTful è®¾è®¡**ï¼šç¬¦åˆ REST è§„èŒƒ

### é¡¹ç›®ç»“æ„

```
com.vben.admin/
â”œâ”€â”€ BackendServiceApplication.java    # å¯åŠ¨ç±»ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ config/                           # é…ç½®å±‚
â”‚   â”œâ”€â”€ SecurityConfiguration.java   # Spring Security é…ç½®
â”‚   â”œâ”€â”€ MybatisPlusConfig.java      # MyBatis Plus é…ç½®
â”‚   â”œâ”€â”€ Knife4jConfig.java           # Swagger é…ç½®
â”‚   â”œâ”€â”€ CorsConfig.java              # è·¨åŸŸé…ç½®
â”‚   â”œâ”€â”€ AsyncConfig.java             # å¼‚æ­¥é…ç½®
â”‚   â””â”€â”€ FieldFillHandler.java        # å­—æ®µè‡ªåŠ¨å¡«å……
â”œâ”€â”€ controller/                       # æ§åˆ¶å±‚ï¼ˆRESTful APIï¼‰
â”‚   â”œâ”€â”€ AuthController.java          # è®¤è¯æ§åˆ¶å™¨ï¼ˆ/authï¼‰
â”‚   â”œâ”€â”€ UserController.java          # ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/userï¼‰
â”‚   â”œâ”€â”€ UserProfileController.java   # ç”¨æˆ·ä¸ªäººä¸­å¿ƒæ§åˆ¶å™¨ï¼ˆ/userï¼‰
â”‚   â”œâ”€â”€ RoleController.java          # è§’è‰²ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/roleï¼‰
â”‚   â”œâ”€â”€ MenuController.java          # èœå•ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/menuï¼‰
â”‚   â”œâ”€â”€ MenuRouterController.java    # èœå•è·¯ç”±æ§åˆ¶å™¨ï¼ˆ/menuï¼‰
â”‚   â”œâ”€â”€ DeptController.java          # éƒ¨é—¨ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/deptï¼‰
â”‚   â””â”€â”€ OperationLogController.java  # æ“ä½œæ—¥å¿—ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/operation-logï¼‰
â”œâ”€â”€ service/                          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ AuthService.java             # è®¤è¯æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ UserService.java            # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ RoleService.java            # è§’è‰²æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ MenuService.java            # èœå•æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ DeptService.java            # éƒ¨é—¨æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ OperationLogService.java    # æ“ä½œæ—¥å¿—æœåŠ¡æ¥å£
â”‚   â””â”€â”€ impl/                        # æœåŠ¡å®ç°
â”‚       â”œâ”€â”€ AuthServiceImpl.java
â”‚       â”œâ”€â”€ UserServiceImpl.java
â”‚       â””â”€â”€ ...
â”œâ”€â”€ mapper/                          # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisï¼‰
â”‚   â”œâ”€â”€ UserMapper.java
â”‚   â”œâ”€â”€ RoleMapper.java
â”‚   â”œâ”€â”€ MenuMapper.java
â”‚   â”œâ”€â”€ DeptMapper.java
â”‚   â”œâ”€â”€ OperationLogMapper.java
â”‚   â”œâ”€â”€ PermissionMapper.java        # æƒé™ç  Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ RoleMenuMapper.java          # è§’è‰²èœå•å…³è” Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â””â”€â”€ UserRoleMapper.java          # ç”¨æˆ·è§’è‰²å…³è” Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”œâ”€â”€ model/                           # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ entity/                     # å®ä½“ç±»ï¼ˆæ•°æ®åº“è¡¨æ˜ å°„ï¼‰
â”‚   â”‚   â”œâ”€â”€ SysUser.java
â”‚   â”‚   â”œâ”€â”€ SysRole.java
â”‚   â”‚   â”œâ”€â”€ SysMenu.java
â”‚   â”‚   â”œâ”€â”€ SysDept.java
â”‚   â”‚   â”œâ”€â”€ SysOperationLog.java
â”‚   â”‚   â”œâ”€â”€ SysPermission.java       # æƒé™ç å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ SysRoleMenu.java         # è§’è‰²èœå•å…³è”å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ SysUserRole.java         # ç”¨æˆ·è§’è‰²å…³è”å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ dto/                        # æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆè¯·æ±‚å‚æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ UserDTO.java
â”‚   â”‚   â”œâ”€â”€ RoleDTO.java
â”‚   â”‚   â”œâ”€â”€ MenuDTO.java
â”‚   â”‚   â”œâ”€â”€ DeptDTO.java
â”‚   â”‚   â”œâ”€â”€ OperationLogQueryDTO.java
â”‚   â”‚   â”œâ”€â”€ LoginDTO.java            # ç™»å½• DTO
â”‚   â”‚   â”œâ”€â”€ UserOptionQueryDTO.java  # ç”¨æˆ·é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â”‚   â”œâ”€â”€ RoleOptionQueryDTO.java  # è§’è‰²é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â”‚   â”œâ”€â”€ MenuOrderDTO.java        # èœå•æ’åº DTO
â”‚   â”‚   â”œâ”€â”€ BatchMenuOrderDTO.java   # æ‰¹é‡èœå•æ’åº DTO
â”‚   â”‚   â””â”€â”€ OptionQueryDTO.java      # é€šç”¨é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â””â”€â”€ vo/                         # è§†å›¾å¯¹è±¡ï¼ˆå“åº”æ•°æ®ï¼‰
â”‚       â”œâ”€â”€ UserVO.java
â”‚       â”œâ”€â”€ RoleVO.java
â”‚       â”œâ”€â”€ MenuVO.java
â”‚       â”œâ”€â”€ DeptVO.java
â”‚       â”œâ”€â”€ OperationLogVO.java
â”‚       â”œâ”€â”€ LoginResultVO.java      # ç™»å½•ç»“æœ VO
â”‚       â””â”€â”€ TreeOptionVO.java       # æ ‘å½¢é€‰é¡¹ VO
â””â”€â”€ core/                            # æ ¸å¿ƒåŠŸèƒ½
    â”œâ”€â”€ enums/                      # æšä¸¾ç±»
    â”‚   â”œâ”€â”€ OperationType.java       # æ“ä½œç±»å‹æšä¸¾
    â”‚   â”œâ”€â”€ ErrMsg.java              # é”™è¯¯æ¶ˆæ¯æšä¸¾
    â”‚   â””â”€â”€ BaseErrMsg.java          # åŸºç¡€é”™è¯¯æ¶ˆæ¯æšä¸¾
    â”œâ”€â”€ exception/                  # å¼‚å¸¸å¤„ç†
    â”‚   â”œâ”€â”€ BusinessException.java   # ä¸šåŠ¡å¼‚å¸¸
    â”‚   â”œâ”€â”€ GlobalExceptionHandler.java  # å…¨å±€å¼‚å¸¸å¤„ç†å™¨
    â”‚   â””â”€â”€ ...
    â”œâ”€â”€ filter/                     # è¿‡æ»¤å™¨
    â”‚   â””â”€â”€ JwtAuthenticationFilter.java  # JWT è®¤è¯è¿‡æ»¤å™¨
    â”œâ”€â”€ model/                      # é€šç”¨æ¨¡å‹
    â”‚   â”œâ”€â”€ BaseResult.java         # ç»Ÿä¸€å“åº”æ ¼å¼
    â”‚   â””â”€â”€ PageResult.java         # åˆ†é¡µå“åº”æ ¼å¼
    â”œâ”€â”€ utils/                       # å·¥å…·ç±»ï¼ˆç»Ÿä¸€ä½ç½®ï¼‰âœ…
    â”‚   â”œâ”€â”€ JwtUtils.java           # JWT å·¥å…·
    â”‚   â”œâ”€â”€ SecurityUtils.java      # å®‰å…¨å·¥å…·
    â”‚   â”œâ”€â”€ CookieUtils.java        # Cookie å·¥å…·
    â”‚   â”œâ”€â”€ QueryHelper.java        # æŸ¥è¯¢è¾…åŠ©å·¥å…·
    â”‚   â”œâ”€â”€ OperationInfoParser.java  # æ“ä½œä¿¡æ¯è§£æå™¨
    â”‚   â”œâ”€â”€ BrowserInfoParser.java  # æµè§ˆå™¨ä¿¡æ¯è§£æå™¨
    â”‚   â”œâ”€â”€ MenuModuleResolver.java # èœå•æ¨¡å—è§£æå™¨
    â”‚   â””â”€â”€ SensitiveDataFilter.java # æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
    â”œâ”€â”€ aspect/                      # AOP åˆ‡é¢
    â”‚   â””â”€â”€ OperationLogAspect.java # æ“ä½œæ—¥å¿—åˆ‡é¢
    â””â”€â”€ task/                        # å®šæ—¶ä»»åŠ¡
        â””â”€â”€ OperationLogCleanupTask.java  # æ“ä½œæ—¥å¿—æ¸…ç†ä»»åŠ¡
```

### è¯·æ±‚å¤„ç†æµç¨‹

```
HTTP è¯·æ±‚
  â†“
Controller å±‚ï¼ˆå‚æ•°æ ¡éªŒã€è·¯ç”±æ˜ å°„ï¼‰
  â†“
Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å¤„ç†ï¼‰
  â†“
Mapper å±‚ï¼ˆæ•°æ®åº“æ“ä½œï¼‰
  â†“
Databaseï¼ˆMySQLï¼‰
  â†“
è¿”å›ç»“æœï¼ˆç»Ÿä¸€æ ¼å¼ BaseResult<T>ï¼‰
```

---

## Controller å±‚è®¾è®¡

### 1. Controller æ ‡å‡†ç»“æ„

Controller å±‚è´Ÿè´£æ¥æ”¶ HTTP è¯·æ±‚ï¼Œè¿›è¡Œå‚æ•°æ ¡éªŒï¼Œè°ƒç”¨ Service å±‚å¤„ç†ä¸šåŠ¡é€»è¾‘ï¼š

```java
@Tag(name = "ç³»ç»Ÿç”¨æˆ·ç®¡ç†")  // âœ… ä½¿ç”¨ @Tagï¼ˆSpringDoc OpenAPI 3ï¼‰
@RestController
@RequestMapping("/system/user")
@RequiredArgsConstructor
public class UserController {

    private final UserService userService;

    @Operation(summary = "è·å–ç”¨æˆ·åˆ—è¡¨", description = "è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼‰")
    @GetMapping
    public BaseResult<PageResult<UserVO>> getList(
            @RequestParam(required = false, defaultValue = "1") Integer page,
            @RequestParam(required = false, defaultValue = "20") Integer pageSize,
            @RequestParam(required = false) String search,
            @RequestParam(required = false) String username,
            @RequestParam(required = false) String realName,
            @RequestParam(required = false) String deptId,
            @RequestParam(required = false) Integer status,
            @RequestParam(required = false) String startTime,
            @RequestParam(required = false) String endTime) {
        PageResult<UserVO> result = userService.getUserList(page, pageSize, search, username, realName, deptId, status, startTime, endTime);
        return new BaseResult<>(result);
    }

    @Operation(summary = "è·å–ç”¨æˆ·ä¿¡æ¯", description = "æ ¹æ®IDè·å–ç”¨æˆ·è¯¦ç»†ä¿¡æ¯")
    @GetMapping("/{id}")
    public BaseResult<UserVO> getById(@PathVariable String id) {
        UserVO user = userService.getUserById(id);
        return new BaseResult<>(user);
    }

    @Operation(summary = "åˆ›å»ºç”¨æˆ·", description = "åˆ›å»ºæ–°ç”¨æˆ·")
    @PostMapping
    public BaseResult<String> create(@Validated(UserDTO.Create.class) @RequestBody UserDTO userDTO) {
        String id = userService.createUser(userDTO);
        return new BaseResult<>(id);
    }

    @Operation(summary = "æ›´æ–°ç”¨æˆ·", description = "æ›´æ–°ç”¨æˆ·ä¿¡æ¯")
    @PutMapping("/{id}")
    public BaseResult<Boolean> update(@PathVariable String id, @Validated(UserDTO.Update.class) @RequestBody UserDTO userDTO) {
        userService.updateUser(id, userDTO);
        return new BaseResult<>(true);
    }

    @Operation(summary = "åˆ é™¤ç”¨æˆ·", description = "åˆ é™¤ç”¨æˆ·ï¼ˆé€»è¾‘åˆ é™¤ï¼‰")
    @DeleteMapping("/{id}")
    public BaseResult<Boolean> delete(@PathVariable String id) {
        userService.deleteUser(id);
        return new BaseResult<>(true);
    }

    @Operation(summary = "è·å–ç”¨æˆ·é€‰é¡¹åˆ—è¡¨", description = "è·å–ç”¨æˆ·é€‰é¡¹åˆ—è¡¨ï¼ˆç”¨äºä¸‹æ‹‰é€‰é¡¹ï¼Œæ”¯æŒåˆ†é¡µæˆ– limit é™åˆ¶ï¼Œæ”¯æŒæ¡ä»¶æŸ¥è¯¢ï¼Œè¿”å›å®Œæ•´ç”¨æˆ·ä¿¡æ¯ï¼Œå‰ç«¯è‡ªè¡Œå¤„ç† label å’Œ valueï¼‰ã€‚å¦‚æœä¼ äº† page å’Œ pageSizeï¼Œåˆ™ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼›å¦åˆ™ä½¿ç”¨ limit é™åˆ¶ï¼ˆé»˜è®¤ 1000ï¼‰")
    @GetMapping("/options")
    public BaseResult<PageResult<UserVO>> getOptions(UserOptionQueryDTO queryDTO) {
        PageResult<UserVO> result = userService.getUserOptions(queryDTO);
        return new BaseResult<>(result);
    }
}
```

**è®¾è®¡è¦ç‚¹**ï¼š
1. **ä½¿ç”¨ `@RequiredArgsConstructor`**ï¼šæ›¿ä»£ `@Autowired`ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
2. **ç»Ÿä¸€è¿”å›ç±»å‹**ï¼šæ‰€æœ‰æ¥å£è¿”å› `BaseResult<T>`
3. **RESTful è®¾è®¡**ï¼šä½¿ç”¨æ ‡å‡† HTTP æ–¹æ³•ï¼ˆGETã€POSTã€PUTã€DELETEï¼‰
4. **å‚æ•°æ ¡éªŒ**ï¼šä½¿ç”¨ `@Valid` æˆ– `@Validated` è¿›è¡Œåˆ†ç»„æ ¡éªŒ
5. **Swagger æ³¨è§£**ï¼š
   - Controller ç±»ä½¿ç”¨ `@Tag(name = "...")`ï¼ˆSpringDoc OpenAPI 3ï¼Œæ›¿ä»£ Springfox çš„ `@Api`ï¼‰
   - Controller æ–¹æ³•ä½¿ç”¨ `@Operation(summary = "...")`ï¼ˆOpenAPI 3.0ï¼‰
   - Controller å‚æ•°ä½¿ç”¨ `@Parameter(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰
   - DTO/VO å­—æ®µä½¿ç”¨ `@Schema(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰

**å‘½åè§„èŒƒ**ï¼š
- âœ… **ä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´**ï¼šControllerã€Serviceã€Mapperã€Entityã€DTOã€VO ä½¿ç”¨ç›¸åŒçš„ä¸šåŠ¡åç§°
- âœ… **Controller å‘½å**ï¼š`ä¸šåŠ¡åç§°` + `Controller`ï¼ˆå¦‚ `UserController`ã€`RoleController`ï¼‰
- âœ… **Entity å‘½å**ï¼š`è¡¨å‰ç¼€` + `ä¸šåŠ¡åç§°`ï¼ˆå¦‚ `SysUser` å¯¹åº” `sys_user` è¡¨ï¼‰
- âœ… **é€šè¿‡è·¯å¾„åŒºåˆ†åŠŸèƒ½**ï¼šç®¡ç†ç«¯ CRUD ä½¿ç”¨ `/system/*`ï¼Œç”¨æˆ·ä¸ªäººä¸­å¿ƒä½¿ç”¨ `/*`

### 2. RESTful è·¯ç”±è®¾è®¡

**æ ‡å‡† CRUD æ¥å£**ï¼ˆæ‰€æœ‰æ¨¡å—ç»Ÿä¸€ä½¿ç”¨èµ„æºæ ¹è·¯å¾„ï¼‰ï¼š

```
GET    /system/user              # åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /system/user/{id}         # è¯¦æƒ…
POST   /system/user              # åˆ›å»º
PUT    /system/user/{id}         # æ›´æ–°
DELETE /system/user/{id}         # åˆ é™¤
```

**æ‰€æœ‰ç³»ç»Ÿæ¨¡å—ç»Ÿä¸€è§„èŒƒ**ï¼š

```
GET    /system/user              # ç”¨æˆ·åˆ—è¡¨
GET    /system/role              # è§’è‰²åˆ—è¡¨
GET    /system/menu              # èœå•åˆ—è¡¨
GET    /system/dept              # éƒ¨é—¨åˆ—è¡¨
GET    /system/operation-log     # æ“ä½œæ—¥å¿—åˆ—è¡¨
```

**å­èµ„æºæ¥å£**ï¼š

```
GET    /system/user/options      # é€‰é¡¹åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µæˆ– limit é™åˆ¶ï¼‰
PUT    /system/user/{id}/status  # æ›´æ–°çŠ¶æ€ï¼ˆåŠ¨ä½œï¼‰
PUT    /system/user/{id}/password # é‡ç½®å¯†ç ï¼ˆåŠ¨ä½œï¼‰
```

**è§„èŒƒè¦ç‚¹**ï¼š
- âœ… **ç»Ÿä¸€ä½¿ç”¨èµ„æºæ ¹è·¯å¾„**ï¼šåˆ—è¡¨æ¥å£ä½¿ç”¨ `GET /resource`ï¼Œä¸ä½¿ç”¨ `/list` åç¼€
- âœ… **ç¬¦åˆ RESTful è§„èŒƒ**ï¼šèµ„æºå³ URLï¼Œé€šè¿‡ HTTP æ–¹æ³•åŒºåˆ†æ“ä½œ
- âœ… **ä¿æŒä¸€è‡´æ€§**ï¼šæ‰€æœ‰æ¨¡å—éµå¾ªç›¸åŒçš„è·¯ç”±è®¾è®¡è§„èŒƒ

### 3. ç»Ÿä¸€è¿”å›æ ¼å¼

**æ‰€æœ‰æ¥å£ç»Ÿä¸€ä½¿ç”¨ `BaseResult<T>`**ï¼š

```java:14:77:apps/backend-service/src/main/java/com/vben/admin/core/model/BaseResult.java
@Data
public class BaseResult<E> implements Serializable {

    private static final long serialVersionUID = 1L;

    /**
     * çŠ¶æ€ç ï¼š0æˆåŠŸï¼Œå…¶ä»–ä¸ºå¤±è´¥
     */
    public int code;

    /**
     * æˆåŠŸä¸ºokï¼Œå…¶ä»–ä¸ºå¤±è´¥åŸå› 
     */
    public String message;

    /**
     * æ•°æ®ç»“æœé›†
     */
    public E data;

    public BaseResult() {
        this.code = ErrMsg.DEFAULT_SUCCESS_CODE;
        this.message = ErrMsg.DEFAULT_SUCCESS_MESSAGE;
    }

    public BaseResult(E data) {
        this();
        this.data = data;
    }
}
```

**å“åº”æ ¼å¼**ï¼š
```json
{
  "code": 0,
  "message": "ok",
  "data": T
}
```

**åˆ†é¡µæ¥å£è¿”å› `PageResult<T>`**ï¼š

```java:15:41:apps/backend-service/src/main/java/com/vben/admin/core/model/PageResult.java
@Data
@NoArgsConstructor
@AllArgsConstructor
public class PageResult<T> {

    /**
     * æ•°æ®åˆ—è¡¨
     */
    private List<T> list;

    /**
     * æ€»è®°å½•æ•°
     */
    private Long total;

    /**
     * åˆ›å»ºåˆ†é¡µç»“æœ
     */
    public static <T> PageResult<T> of(List<T> list, Long total) {
        return new PageResult<>(list, total);
    }
}
```

**åˆ†é¡µå“åº”æ ¼å¼**ï¼š
```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "list": List<T>,
    "total": 100
  }
}
```

---

## Service å±‚è®¾è®¡

### 1. Service æ¥å£è®¾è®¡

Service æ¥å£å®šä¹‰ä¸šåŠ¡æ–¹æ³•ï¼Œä½¿ç”¨æ¸…æ™°çš„ JavaDoc æ³¨é‡Šï¼š

```java:13:85:apps/backend-service/src/main/java/com/vben/admin/service/UserService.java
public interface UserService {

    /**
     * è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
     *
     * @param page      é¡µç ï¼ˆä»1å¼€å§‹ï¼‰
     * @param pageSize  æ¯é¡µå¤§å°
     * @param search    æœç´¢å…³é”®è¯ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·åå’ŒçœŸå®å§“åï¼Œä¼˜å…ˆçº§é«˜äº username/realNameï¼‰
     * @param username  ç”¨æˆ·åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸ search äº’æ–¥ï¼‰
     * @param realName  çœŸå®å§“åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸ search äº’æ–¥ï¼‰
     * @param deptId    éƒ¨é—¨ID
     * @param status    çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰
     * @param startTime å¼€å§‹æ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-ddï¼‰
     * @param endTime   ç»“æŸæ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-ddï¼‰
     * @return åˆ†é¡µç»“æœ
     */
    PageResult<UserVO> getUserList(Integer page, Integer pageSize, String search, String username, String realName, String deptId, Integer status, String startTime, String endTime);

    /**
     * è·å–ç”¨æˆ·é€‰é¡¹åˆ—è¡¨ï¼ˆç”¨äºä¸‹æ‹‰é€‰é¡¹ï¼Œæ”¯æŒåˆ†é¡µæˆ– limit é™åˆ¶ï¼‰
     *
     * @param queryDTO æŸ¥è¯¢æ¡ä»¶
     * @return ç”¨æˆ·é€‰é¡¹åˆ—è¡¨ï¼ˆåŒ…å«æ‰€æœ‰ç”¨æˆ·å­—æ®µï¼Œå‰ç«¯è‡ªè¡Œå¤„ç† label å’Œ valueï¼‰
     *         å¦‚æœä¼ äº† page å’Œ pageSizeï¼Œåˆ™ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼›å¦åˆ™ä½¿ç”¨ limit é™åˆ¶ï¼ˆé»˜è®¤ 1000ï¼‰
     */
    PageResult<UserVO> getUserOptions(UserOptionQueryDTO queryDTO);
}
```

### 2. Service å®ç°ç±»è®¾è®¡

Service å®ç°ç±»ä½¿ç”¨ `@Service` å’Œ `@RequiredArgsConstructor`ï¼Œå®ç°ä¸šåŠ¡é€»è¾‘ï¼š

```java
@Service
@RequiredArgsConstructor
public class UserServiceImpl implements UserService {

    private final UserMapper userMapper;
    private final PasswordEncoder passwordEncoder;

    @Override
    public PageResult<UserVO> getUserList(Integer page, Integer pageSize, String search, String username, String realName, String deptId, Integer status, String startTime, String endTime) {
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<>();

        // æœç´¢å…³é”®è¯å¤„ç†ï¼ˆä¼˜å…ˆçº§é«˜äº username/realNameï¼‰
        QueryHelper.applySearch(
                queryWrapper,
                SearchQueryConfig.<SysUser>of(search)
                        .searchField(SysUser::getUsername)
                        .searchField(SysUser::getRealName)
                        .fallbackField(SysUser::getUsername, username)
                        .fallbackField(SysUser::getRealName, realName)
        );

        // å…¶ä»–æŸ¥è¯¢æ¡ä»¶
        if (StringUtils.hasText(deptId)) {
            queryWrapper.eq(SysUser::getDeptId, deptId);
        }
        if (status != null) {
            queryWrapper.eq(SysUser::getStatus, status);
        }

        // æ—¶é—´èŒƒå›´æŸ¥è¯¢
        QueryHelper.applyTimeRange(queryWrapper, startTime, endTime, SysUser::getCreateTime);

        queryWrapper.orderByDesc(SysUser::getCreateTime);

        // åˆ†é¡µæŸ¥è¯¢
        Page<SysUser> pageParam = new Page<>(page, pageSize);
        IPage<SysUser> pageResult = userMapper.selectPage(pageParam, queryWrapper);

        // è½¬æ¢ä¸ºVO
        List<UserVO> voList = pageResult.getRecords().stream()
                .map(this::convertToVO)
                .collect(Collectors.toList());

        return PageResult.of(voList, pageResult.getTotal());
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public String createUser(UserDTO userDTO) {
        // éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§
        validateUserUniqueness(userDTO, null);

        // åˆ›å»ºç”¨æˆ·å®ä½“
        SysUser user = buildUserEntity(userDTO, null);
        userMapper.insert(user);

        // ä¿å­˜ç”¨æˆ·è§’è‰²å…³è”
        if (userDTO.getRoleIds() != null && !userDTO.getRoleIds().isEmpty()) {
            saveUserRoles(user.getId(), userDTO.getRoleIds());
        }

        return user.getId();
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public void updateUser(String id, UserDTO userDTO) {
        // æŸ¥è¯¢ç”¨æˆ·
        SysUser user = getUserByIdOrThrow(id);

        // éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§ï¼ˆåªéªŒè¯å˜æ›´çš„å­—æ®µï¼‰
        validateUserUniquenessForUpdate(user, userDTO, id);

        // æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
        updateUserBasicInfo(user, userDTO);
        userMapper.updateById(user);

        // æ›´æ–°ç”¨æˆ·è§’è‰²å…³è”
        updateUserRoles(id, userDTO.getRoleIds());
    }

    /**
     * æ ¹æ®IDè·å–ç”¨æˆ·ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
     */
    private SysUser getUserByIdOrThrow(String id) {
        SysUser user = userMapper.selectById(id);
        if (user == null) {
            throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
        }
        return user;
    }

    /**
     * éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§ï¼ˆåˆ›å»ºæ—¶ï¼‰
     */
    private void validateUserUniqueness(UserDTO userDTO, String id) {
        if (StringUtils.hasText(userDTO.getUsername())) {
            checkUsernameNotExists(userDTO.getUsername(), id);
        }
        if (StringUtils.hasText(userDTO.getPhone())) {
            checkPhoneNotExists(userDTO.getPhone(), id);
        }
        if (StringUtils.hasText(userDTO.getEmployeeNo())) {
            checkEmployeeNoNotExists(userDTO.getEmployeeNo(), id);
        }
    }

    // ... å…¶ä»–ç§æœ‰æ–¹æ³•
}
```

**è®¾è®¡è¦ç‚¹**ï¼š
1. **ä½¿ç”¨ `@Service`**ï¼šæ ‡è¯†æœåŠ¡å±‚ç»„ä»¶
2. **ä½¿ç”¨ `@RequiredArgsConstructor`**ï¼šæ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–
3. **äº‹åŠ¡ç®¡ç†**ï¼šå†™æ“ä½œä½¿ç”¨ `@Transactional(rollbackFor = Exception.class)`
4. **ä½¿ç”¨å·¥å…·ç±»**ï¼šæ—¶é—´èŒƒå›´æŸ¥è¯¢ä½¿ç”¨ `QueryHelper.applyTimeRange()`ï¼Œæœç´¢ä½¿ç”¨ `QueryHelper.applySearch()`
5. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ `LambdaQueryWrapper` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
6. **VO è½¬æ¢**ï¼šä½¿ç”¨ `BeanUtils.copyProperties()` æˆ–æ‰‹åŠ¨æ˜ å°„
7. **ä»£ç ä¼˜åŒ–**ï¼šæå–ç§æœ‰æ–¹æ³•ï¼Œæé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

### 3. Service å®ç°ç±»ä¼˜åŒ–æ¨¡å¼

**ç»Ÿä¸€çš„ä¼˜åŒ–æ¨¡å¼**ï¼ˆæ‰€æœ‰ Service å®ç°ç±»éµå¾ªï¼‰ï¼š

#### 3.1 å®ä½“æŸ¥è¯¢æ–¹æ³•

```java
/**
 * æ ¹æ®IDè·å–å®ä½“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
 *
 * @param id å®ä½“ID
 * @return å®ä½“å¯¹è±¡
 * @throws BusinessException å¦‚æœå®ä½“ä¸å­˜åœ¨
 */
private SysUser getUserByIdOrThrow(String id) {
    SysUser user = userMapper.selectById(id);
    if (user == null) {
        throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
    }
    return user;
}
```

**å‘½åè§„èŒƒ**ï¼š`get{Entity}ByIdOrThrow(String id)`

#### 3.2 éªŒè¯æ–¹æ³•

```java
/**
 * éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§ï¼ˆåˆ›å»ºæ—¶ï¼‰
 */
private void validateUserUniqueness(UserDTO userDTO, String id) {
    if (StringUtils.hasText(userDTO.getUsername())) {
        checkUsernameNotExists(userDTO.getUsername(), id);
    }
    if (StringUtils.hasText(userDTO.getPhone())) {
        checkPhoneNotExists(userDTO.getPhone(), id);
    }
}

/**
 * æ£€æŸ¥ç”¨æˆ·åä¸å­˜åœ¨
 */
private void checkUsernameNotExists(String username, String id) {
    LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<SysUser>()
            .eq(SysUser::getUsername, username);
    if (id != null) {
        queryWrapper.ne(SysUser::getId, id);
    }
    long count = userMapper.selectCount(queryWrapper);
    if (count > 0) {
        throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
    }
}
```

**å‘½åè§„èŒƒ**ï¼š
- éªŒè¯æ–¹æ³•ï¼š`validate{Field}NotExists()` æˆ– `validate{Entity}Uniqueness()`
- æ£€æŸ¥æ–¹æ³•ï¼š`check{Field}NotExists()`

#### 3.3 æ„å»ºæ–¹æ³•

```java
/**
 * æ„å»ºç”¨æˆ·å®ä½“
 *
 * @param userDTO ç”¨æˆ·DTO
 * @param id      ç”¨æˆ·IDï¼ˆæ›´æ–°æ—¶ä¼ å…¥ï¼Œåˆ›å»ºæ—¶ä¼ å…¥nullï¼‰
 * @return ç”¨æˆ·å®ä½“
 */
private SysUser buildUserEntity(UserDTO userDTO, String id) {
    SysUser user = new SysUser();
    user.setUsername(userDTO.getUsername());
    // å¯†ç å¤„ç†ï¼šå¦‚æœæœªæä¾›å¯†ç ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å¯†ç 
    String password = StringUtils.hasText(userDTO.getPassword())
            ? userDTO.getPassword()
            : "88888888";
    user.setPassword(passwordEncoder.encode(password));
    user.setRealName(userDTO.getRealName());
    // ... å…¶ä»–å­—æ®µè®¾ç½®
    user.setStatus(userDTO.getStatus() != null ? userDTO.getStatus() : 1);
    return user;
}
```

**å‘½åè§„èŒƒ**ï¼š`build{Entity}Entity(DTO dto, String id)`

#### 3.4 æ›´æ–°æ–¹æ³•

```java
/**
 * æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
 *
 * @param user    ç”¨æˆ·å®ä½“
 * @param userDTO ç”¨æˆ·DTO
 */
private void updateUserBasicInfo(SysUser user, UserDTO userDTO) {
    if (StringUtils.hasText(userDTO.getUsername())) {
        user.setUsername(userDTO.getUsername());
    }
    if (StringUtils.hasText(userDTO.getPassword())) {
        user.setPassword(passwordEncoder.encode(userDTO.getPassword()));
    }
    // ... å…¶ä»–å­—æ®µæ›´æ–°
}
```

**å‘½åè§„èŒƒ**ï¼š`update{Entity}BasicInfo(Entity entity, DTO dto)`

#### 3.5 å·¥å…·æ–¹æ³•

```java
/**
 * è·å–ç”¨æˆ·åç§°ï¼ˆä¼˜å…ˆä½¿ç”¨çœŸå®å§“åï¼Œå¦åˆ™ä½¿ç”¨ç”¨æˆ·åï¼‰
 *
 * @param userId ç”¨æˆ·ID
 * @return ç”¨æˆ·åç§°
 */
private String getUserName(String userId) {
    SysUser user = userMapper.selectById(userId);
    if (user != null) {
        return user.getRealName() != null ? user.getRealName() : user.getUsername();
    }
    return null;
}
```

**å‘½åè§„èŒƒ**ï¼šæ ¹æ®å…·ä½“åŠŸèƒ½å‘½åï¼Œå¦‚ `getUserName()`ã€`getDeptName()` ç­‰

### 4. Service å±‚ä¼˜åŒ–æ•ˆæœ

**ä¼˜åŒ–å‰**ï¼š
```java
@Override
@Transactional(rollbackFor = Exception.class)
public String createUser(UserDTO userDTO) {
    // æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å·²å­˜åœ¨
    long count = userMapper.selectCount(
            new LambdaQueryWrapper<SysUser>()
                    .eq(SysUser::getUsername, userDTO.getUsername())
    );
    if (count > 0) {
        throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
    }

    // æ£€æŸ¥æ‰‹æœºå·æ˜¯å¦å·²å­˜åœ¨
    long phoneCount = userMapper.selectCount(
            new LambdaQueryWrapper<SysUser>()
                    .eq(SysUser::getPhone, userDTO.getPhone())
    );
    if (phoneCount > 0) {
        throw new BusinessException("æ‰‹æœºå·å·²å­˜åœ¨");
    }

    // åˆ›å»ºç”¨æˆ·
    SysUser user = new SysUser();
    user.setUsername(userDTO.getUsername());
    // ... å¤§é‡å­—æ®µè®¾ç½®ä»£ç 
    userMapper.insert(user);
    return user.getId();
}
```

**ä¼˜åŒ–å**ï¼š
```java
@Override
@Transactional(rollbackFor = Exception.class)
public String createUser(UserDTO userDTO) {
    // éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§
    validateUserUniqueness(userDTO, null);

    // åˆ›å»ºç”¨æˆ·å®ä½“
    SysUser user = buildUserEntity(userDTO, null);
    userMapper.insert(user);

    // ä¿å­˜ç”¨æˆ·è§’è‰²å…³è”
    if (userDTO.getRoleIds() != null && !userDTO.getRoleIds().isEmpty()) {
        saveUserRoles(user.getId(), userDTO.getRoleIds());
    }

    return user.getId();
}
```

**ä¼˜åŒ–æ•ˆæœ**ï¼š
- âœ… **å¯è¯»æ€§æå‡**ï¼šä¸»æ–¹æ³•é€»è¾‘æ¸…æ™°ï¼ŒèŒè´£å•ä¸€
- âœ… **å¯ç»´æŠ¤æ€§æå‡**ï¼šæå–çš„ç§æœ‰æ–¹æ³•ä¾¿äºå¤ç”¨å’Œæµ‹è¯•
- âœ… **ä»£ç é‡å‡å°‘**ï¼šæ¶ˆé™¤é‡å¤ä»£ç ï¼Œæé«˜ä»£ç è´¨é‡
- âœ… **ç»Ÿä¸€æ¨¡å¼**ï¼šæ‰€æœ‰ Service å®ç°ç±»éµå¾ªç›¸åŒçš„ä¼˜åŒ–æ¨¡å¼

---

## æ•°æ®åº“æ“ä½œè®¾è®¡

### 1. MyBatis Plus æŸ¥è¯¢æ¡ä»¶æ„å»º

**ä½¿ç”¨ `LambdaQueryWrapper`ï¼ˆç±»å‹å®‰å…¨ï¼‰**ï¼š

```java
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ LambdaQueryWrapper
LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<>();
queryWrapper.like(SysUser::getUsername, keyword);
queryWrapper.eq(SysUser::getStatus, 1);

// âŒ é”™è¯¯ï¼šé¿å…å­—ç¬¦ä¸²æ‹¼æ¥
QueryWrapper<SysUser> queryWrapper = new QueryWrapper<>();
queryWrapper.like("username", keyword);  // ä¸æ¨è
```

### 2. åˆ†é¡µæŸ¥è¯¢

```java
// åˆ†é¡µæŸ¥è¯¢
Page<SysUser> pageParam = new Page<>(page, pageSize);
IPage<SysUser> pageResult = userMapper.selectPage(pageParam, queryWrapper);

// è½¬æ¢ä¸ºVO
List<UserVO> voList = pageResult.getRecords().stream()
        .map(this::convertToVO)
        .collect(Collectors.toList());

return PageResult.of(voList, pageResult.getTotal());
```

### 3. é€»è¾‘åˆ é™¤

**Entity ä¸­ä½¿ç”¨ `@TableLogic`**ï¼š

```java
@TableLogic
private Integer deleted;
```

**æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤ deleted=1 çš„è®°å½•ï¼Œåˆ é™¤æ—¶è‡ªåŠ¨æ›´æ–° deleted=1ï¼Œä¸ç‰©ç†åˆ é™¤**

### 4. å·¥å…·ç±»ä½¿ç”¨

**æ—¶é—´èŒƒå›´æŸ¥è¯¢**ï¼š

```java:37:64:apps/backend-service/src/main/java/com/vben/admin/core/utils/QueryHelper.java
public static <T> void applyTimeRange(
        LambdaQueryWrapper<T> queryWrapper,
        String startTime,
        String endTime,
        SFunction<T, ?> timeField
) {
    // å¼€å§‹æ—¶é—´æŸ¥è¯¢
    if (StringUtils.hasText(startTime)) {
        try {
            LocalDate startDate = LocalDate.parse(startTime, DateTimeFormatter.ISO_LOCAL_DATE);
            LocalDateTime startDateTime = startDate.atStartOfDay();
            queryWrapper.ge(timeField, startDateTime);
        } catch (DateTimeParseException e) {
            log.warn("æ— æ•ˆçš„å¼€å§‹æ—¶é—´æ ¼å¼: {}, é”™è¯¯: {}", startTime, e.getMessage());
        }
    }

    // ç»“æŸæ—¶é—´æŸ¥è¯¢
    if (StringUtils.hasText(endTime)) {
        try {
            LocalDate endDate = LocalDate.parse(endTime, DateTimeFormatter.ISO_LOCAL_DATE);
            LocalDateTime endDateTime = endDate.atTime(23, 59, 59);
            queryWrapper.le(timeField, endDateTime);
        } catch (DateTimeParseException e) {
            log.warn("æ— æ•ˆçš„ç»“æŸæ—¶é—´æ ¼å¼: {}, é”™è¯¯: {}", endTime, e.getMessage());
        }
    }
}
```

**Limit é™åˆ¶**ï¼š

```java:74:84:apps/backend-service/src/main/java/com/vben/admin/core/utils/QueryHelper.java
public static <T> List<T> applyLimit(List<T> list, Integer limit) {
    if (list == null || list.isEmpty()) {
        return list;
    }

    int maxLimit = (limit != null && limit > 0) ? limit : DEFAULT_LIMIT;
    if (list.size() > maxLimit) {
        return list.subList(0, maxLimit);
    }
    return list;
}
```

---

## API è®¾è®¡è§„èŒƒ

### 1. List æ¥å£å‚æ•°è®¾è®¡

**æ ‡å‡†å‚æ•°**ï¼š

```java
@GetMapping
public BaseResult<PageResult<UserVO>> getList(
    @RequestParam(required = false, defaultValue = "1") Integer page,        // é¡µç ï¼Œé»˜è®¤1
    @RequestParam(required = false, defaultValue = "20") Integer pageSize, // æ¯é¡µå¤§å°ï¼Œé»˜è®¤20
    @RequestParam(required = false) String search,                          // æœç´¢å…³é”®è¯
    @RequestParam(required = false) String username,                        // å…·ä½“å­—æ®µæŸ¥è¯¢
    // ... å…¶ä»–æŸ¥è¯¢æ¡ä»¶
)
```

**è§„èŒƒ**ï¼š
- `page` å’Œ `pageSize` æœ‰é»˜è®¤å€¼
- `search` å‚æ•°ä¼˜å…ˆçº§é«˜äºå…·ä½“å­—æ®µ
- æ—¶é—´èŒƒå›´ä½¿ç”¨ `startTime` å’Œ `endTime`ï¼ˆæ ¼å¼ï¼š`yyyy-MM-dd`ï¼‰

### 2. Options æ¥å£å‚æ•°è®¾è®¡

**ä½¿ç”¨ DTO å°è£…å‚æ•°**ï¼š

```java:10:52:apps/backend-service/src/main/java/com/vben/admin/model/dto/UserOptionQueryDTO.java
@Data
public class UserOptionQueryDTO {

    /**
     * æœç´¢å…³é”®è¯ï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ç”¨æˆ·åå’ŒçœŸå®å§“åï¼Œä¼˜å…ˆçº§é«˜äº username/realNameï¼‰
     */
    private String search;

    /**
     * ç”¨æˆ·åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸ search äº’æ–¥ï¼‰
     */
    private String username;

    /**
     * çœŸå®å§“åï¼ˆæ¨¡ç³ŠæŸ¥è¯¢ï¼Œä¸ search äº’æ–¥ï¼‰
     */
    private String realName;

    /**
     * éƒ¨é—¨ID
     */
    private String deptId;

    /**
     * çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰
     */
    private Integer status;

    /**
     * å¼€å§‹æ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-ddï¼‰
     */
    private String startTime;

    /**
     * ç»“æŸæ—¶é—´ï¼ˆæ ¼å¼ï¼šyyyy-MM-ddï¼‰
     */
    private String endTime;

    /**
     * æœ€å¤§è¿”å›æ•°é‡ï¼ˆé»˜è®¤ 1000ï¼Œé˜²æ­¢æ•°æ®é‡è¿‡å¤§ï¼‰
     */
    private Integer limit = 1000;
}
```

**è§„èŒƒ**ï¼š
- DTO ä¸­ `limit` æœ‰é»˜è®¤å€¼ï¼ˆ1000ï¼‰
- æ”¯æŒæ‰€æœ‰æŸ¥è¯¢æ¡ä»¶ï¼ˆä¸ List æ¥å£ä¸€è‡´ï¼‰
- ä¸ä½¿ç”¨åˆ†é¡µï¼Œç›´æ¥è¿”å›æ‰€æœ‰æ•°æ®ï¼ˆå— limit é™åˆ¶ï¼‰

### 3. æŸ¥è¯¢å‚æ•°è¯­ä¹‰åŒ–

**ç»Ÿä¸€ä½¿ç”¨ `search` ä»£æ›¿ `keyword`**ï¼š

```java
// âœ… æ­£ç¡®
@RequestParam(required = false) String search

// âŒ é”™è¯¯
@RequestParam(required = false) String keyword
```

---

## å¼‚å¸¸å¤„ç†è®¾è®¡

### 1. ç»Ÿä¸€å¼‚å¸¸å¤„ç†

**å…¨å±€å¼‚å¸¸å¤„ç†å™¨**ï¼š

```java:26:76:apps/backend-service/src/main/java/com/vben/admin/core/exception/GlobalExceptionHandler.java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(BusinessException.class)
    public BaseResult<?> handleBusinessException(BusinessException e) {
        return BaseResult.error(e.getMessage());
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public BaseResult<?> handleValidationException(MethodArgumentNotValidException e) {
        // å‚æ•°æ ¡éªŒå¼‚å¸¸å¤„ç†
    }
}
```

### 2. ä¸šåŠ¡å¼‚å¸¸

**ä½¿ç”¨ `BusinessException`**ï¼š

```java
if (user == null) {
    throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
}

if (count > 0) {
    throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
}
```

**è§„èŒƒ**ï¼š
- å¼‚å¸¸æ¶ˆæ¯è¦æ¸…æ™°æ˜ç¡®
- ä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯ï¼ˆä¾¿äºå‰ç«¯æ˜¾ç¤ºï¼‰
- ä¸è¦æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯

---

## å‚æ•°æ ¡éªŒè®¾è®¡

### 1. éªŒè¯æ¶æ„æ¦‚è§ˆ

é¡¹ç›®é‡‡ç”¨**åˆ†å±‚éªŒè¯æ¶æ„**ï¼Œç¬¦åˆ Spring Boot 3 å’Œ Bean Validation æœ€ä½³å®è·µï¼š

```
Controller å±‚
  â”œâ”€ @Validatedï¼ˆç±»çº§åˆ«ï¼‰
  â”œâ”€ @ValidIdï¼ˆè·¯å¾„å‚æ•°ã€è¯·æ±‚å‚æ•°ï¼‰
  â””â”€ @Validï¼ˆè¯·æ±‚ä½“ï¼‰

Service æ¥å£å±‚
  â””â”€ @ValidIdï¼ˆæ–¹æ³•å‚æ•°ï¼Œåœ¨æ¥å£ä¸­å®šä¹‰ï¼‰

Service å®ç°å±‚
  â””â”€ @Validatedï¼ˆç±»çº§åˆ«ï¼Œå¯ç”¨æ–¹æ³•å‚æ•°éªŒè¯ï¼‰

DTO å±‚
  â”œâ”€ @NotBlank, @Size, @Patternï¼ˆæ ‡å‡†æ³¨è§£ï¼‰
  â””â”€ @ValidIdï¼ˆè‡ªå®šä¹‰æ³¨è§£ï¼Œç”¨äº ID å­—æ®µï¼‰
```

**éªŒè¯åŸåˆ™**ï¼š
- âœ… **éªŒè¯æ³¨è§£åœ¨æ¥å£ä¸­å®šä¹‰**ï¼šService æ¥å£æ–¹æ³•å‚æ•°ä¸Šå®šä¹‰ `@ValidId`ï¼Œå®ç°ç±»ç»§æ‰¿
- âœ… **Controller å±‚éªŒè¯è·¯å¾„å‚æ•°**ï¼šä½¿ç”¨ `@ValidId` éªŒè¯ `@PathVariable` å’Œ `@RequestParam`
- âœ… **Service å±‚éªŒè¯æ–¹æ³•å‚æ•°**ï¼šä½¿ç”¨ `@Validated` å¯ç”¨æ–¹æ³•å‚æ•°éªŒè¯
- âœ… **DTO å±‚éªŒè¯å­—æ®µ**ï¼šä½¿ç”¨æ ‡å‡†æ³¨è§£å’Œè‡ªå®šä¹‰æ³¨è§£éªŒè¯å­—æ®µ

### 2. Bean Validation æ ‡å‡†æ³¨è§£

**DTO ä¸­ä½¿ç”¨æ ¡éªŒæ³¨è§£**ï¼š

```java
@Data
public class UserDTO {

    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¹‹é—´")
    private String username;

    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, max = 50, message = "å¯†ç é•¿åº¦å¿…é¡»åœ¨6-50ä¹‹é—´")
    private String password;
}
```

### 3. è‡ªå®šä¹‰éªŒè¯æ³¨è§£ @ValidId

**ä½ç½®**ï¼š`apps/backend-service/src/main/java/com/vben/admin/core/validation/ValidId.java`

**ç”¨é€”**ï¼šä¸“é—¨ç”¨äºæ ¡éªŒ ID å­—æ®µï¼Œæ‹¦æˆª "null"ã€"undefined"ã€ç©ºæ ¼ç­‰æ— æ•ˆå­—ç¬¦ä¸²

**ä½¿ç”¨åœºæ™¯**ï¼š
- Controller å±‚çš„ `@PathVariable` å’Œ `@RequestParam` å‚æ•°
- Service æ¥å£å±‚çš„æ–¹æ³•å‚æ•°
- DTO ä¸­çš„ ID å­—æ®µ

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
// Controller å±‚
@RestController
@Validated
public class UserController {

    @GetMapping("/{id}")
    public BaseResult<UserVO> getById(
        @ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") @PathVariable String id
    ) {
        // ...
    }
}

// Service æ¥å£å±‚
public interface UserService {
    UserVO getUserById(@ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") String id);
    void updateUser(@ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") String id, UserDTO userDTO);
    void deleteUser(@ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") String id);
}

// Service å®ç°å±‚ï¼ˆç»§æ‰¿æ¥å£çš„éªŒè¯æ³¨è§£ï¼Œæ— éœ€é‡å¤å®šä¹‰ï¼‰
@Service
@Validated
public class UserServiceImpl implements UserService {
    @Override
    public UserVO getUserById(String id) {  // ç»§æ‰¿æ¥å£çš„ @ValidId éªŒè¯
        // ...
    }
}

// DTO å±‚
public class MenuOrderDTO {
    @ValidId(message = "èœå•IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼")
    private String id;
}
```

**éªŒè¯å™¨å®ç°**ï¼š`ValidIdValidator` ä½¿ç”¨ `ValidationUtils.isInvalidId()` ç»Ÿä¸€æ ¡éªŒé€»è¾‘

### 4. åˆ†ç»„æ ¡éªŒ

**åˆ›å»ºå’Œæ›´æ–°ä½¿ç”¨ä¸åŒæ ¡éªŒè§„åˆ™**ï¼š

```java
public class UserDTO {

    public interface Create {}
    public interface Update {}

    @NotBlank(groups = Create.class, message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;

    @NotBlank(groups = Create.class, message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;
}

// Controller ä¸­ä½¿ç”¨
@PostMapping
public BaseResult<String> create(@Validated(UserDTO.Create.class) @RequestBody UserDTO userDTO) {
    // ...
}

@PutMapping("/{id}")
public BaseResult<Boolean> update(
    @ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") @PathVariable String id,
    @Validated(UserDTO.Update.class) @RequestBody UserDTO userDTO
) {
    // ...
}
```

### 5. éªŒè¯å¼‚å¸¸å¤„ç†

**å…¨å±€å¼‚å¸¸å¤„ç†å™¨**ï¼ˆ`GlobalExceptionHandler`ï¼‰ï¼š

```java
// å¤„ç† @RequestBody éªŒè¯å¤±è´¥ï¼ˆMethodArgumentNotValidExceptionï¼‰
@ExceptionHandler(MethodArgumentNotValidException.class)
public BaseResult<Boolean> methodArgumentNotValidExceptionHandler(
    MethodArgumentNotValidException e
) {
    String message = e.getBindingResult().getAllErrors().stream()
            .map(DefaultMessageSourceResolvable::getDefaultMessage)
            .collect(Collectors.joining("; "));
    return new BaseResult<>(HttpStatus.BAD_REQUEST.value(), message);
}

// å¤„ç†æ–¹æ³•å‚æ•°éªŒè¯å¤±è´¥ï¼ˆConstraintViolationExceptionï¼‰
@ExceptionHandler(ConstraintViolationException.class)
public BaseResult<Boolean> constraintViolationExceptionHandler(
    ConstraintViolationException e
) {
    String message = e.getConstraintViolations().stream()
            .map(ConstraintViolation::getMessage)
            .collect(Collectors.joining("; "));
    return new BaseResult<>(HttpStatus.BAD_REQUEST.value(), message);
}
```

### 6. ValidationUtils å·¥å…·ç±»

**ä½ç½®**ï¼š`apps/backend-service/src/main/java/com/vben/admin/core/utils/ValidationUtils.java`

**ç”¨é€”**ï¼šç»Ÿä¸€å¤„ç†å­—ç¬¦ä¸²æ ¡éªŒï¼Œæ‹¦æˆª "null"ã€"undefined"ã€ç©ºæ ¼ç­‰æ— æ•ˆå­—ç¬¦ä¸²

**å¸¸ç”¨æ–¹æ³•**ï¼š

```java
// æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ
boolean isValidString(String str);

// æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ— æ•ˆ
boolean isInvalidString(String str);

// æ¸…ç†å­—ç¬¦ä¸²ï¼ˆå»é™¤é¦–å°¾ç©ºæ ¼ï¼Œå¦‚æœæ˜¯æ— æ•ˆå­—ç¬¦ä¸²åˆ™è¿”å› nullï¼‰
String cleanString(String str);

// æ£€æŸ¥ ID æ˜¯å¦æœ‰æ•ˆ
boolean isValidId(String id);

// æ£€æŸ¥ ID æ˜¯å¦æ— æ•ˆ
boolean isInvalidId(String id);
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- éªŒè¯å™¨å®ç°ï¼ˆ`ValidIdValidator` ä½¿ç”¨ `isInvalidId()`ï¼‰
- ä¸šåŠ¡é€»è¾‘éªŒè¯ï¼ˆå”¯ä¸€æ€§æ£€æŸ¥ã€æ•°æ®æ¸…ç†ã€æ¡ä»¶åˆ¤æ–­ï¼‰
- æŸ¥è¯¢æ¡ä»¶æ„å»ºï¼ˆåˆ¤æ–­æ˜¯å¦æ·»åŠ æŸ¥è¯¢æ¡ä»¶ï¼‰

**ä½¿ç”¨ç¤ºä¾‹**ï¼š

```java
// ä¸šåŠ¡é€»è¾‘éªŒè¯
private void checkUsernameNotExists(String username, String id) {
    if (ValidationUtils.isInvalidString(username)) {
        throw new BusinessException("ç”¨æˆ·åä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼");
    }
    // ...
}

// æ•°æ®æ¸…ç†
String cleanedName = ValidationUtils.cleanString(menuDTO.getName());

// æ¡ä»¶åˆ¤æ–­
if (ValidationUtils.isValidString(userDTO.getUsername())) {
    user.setUsername(ValidationUtils.cleanString(userDTO.getUsername()));
}

// æŸ¥è¯¢æ¡ä»¶æ„å»º
if (ValidationUtils.isValidId(queryDTO.getUserId())) {
    queryWrapper.eq(SysOperationLog::getUserId, queryDTO.getUserId());
}
```

---

## å·¥å…·ç±»ä½¿ç”¨è§„èŒƒ

### 1. QueryHelper å·¥å…·ç±»

**ä½ç½®**ï¼š`apps/backend-service/src/main/java/com/vben/admin/core/utils/QueryHelper.java`

**å¸¸ç”¨æ–¹æ³•**ï¼š

```java
// æ—¶é—´èŒƒå›´æŸ¥è¯¢
QueryHelper.applyTimeRange(queryWrapper, startTime, endTime, SysUser::getCreateTime);

// Limit é™åˆ¶
List<UserVO> users = QueryHelper.applyLimit(users, limit);

// è·å–æœ‰æ•ˆ limit
int maxLimit = QueryHelper.getValidLimit(limit);
```

**å¸¸é‡**ï¼š

```java:26:26:apps/backend-service/src/main/java/com/vben/admin/core/utils/QueryHelper.java
public static final int DEFAULT_LIMIT = 1000;
```

### 2. ValidationUtils å·¥å…·ç±»

**ä½ç½®**ï¼š`apps/backend-service/src/main/java/com/vben/admin/core/utils/ValidationUtils.java`

**ç”¨é€”**ï¼šç»Ÿä¸€å¤„ç†å­—ç¬¦ä¸²æ ¡éªŒï¼Œæ‹¦æˆª "null"ã€"undefined"ã€ç©ºæ ¼ç­‰æ— æ•ˆå­—ç¬¦ä¸²

**å¸¸ç”¨æ–¹æ³•**ï¼š

```java
// æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆ
boolean isValidString(String str);

// æ£€æŸ¥å­—ç¬¦ä¸²æ˜¯å¦æ— æ•ˆ
boolean isInvalidString(String str);

// æ¸…ç†å­—ç¬¦ä¸²ï¼ˆå»é™¤é¦–å°¾ç©ºæ ¼ï¼Œå¦‚æœæ˜¯æ— æ•ˆå­—ç¬¦ä¸²åˆ™è¿”å› nullï¼‰
String cleanString(String str);

// æ£€æŸ¥ ID æ˜¯å¦æœ‰æ•ˆ
boolean isValidId(String id);

// æ£€æŸ¥ ID æ˜¯å¦æ— æ•ˆ
boolean isInvalidId(String id);

// éªŒè¯å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™æŠ›å‡ºå¼‚å¸¸
void requireValidString(String str, String fieldName);

// éªŒè¯ ID æ˜¯å¦æœ‰æ•ˆï¼Œå¦‚æœæ— æ•ˆåˆ™æŠ›å‡ºå¼‚å¸¸
void requireValidId(String id, String fieldName);
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- éªŒè¯å™¨å®ç°ï¼ˆ`ValidIdValidator` ä½¿ç”¨ `isInvalidId()`ï¼‰
- ä¸šåŠ¡é€»è¾‘éªŒè¯ï¼ˆå”¯ä¸€æ€§æ£€æŸ¥ã€æ•°æ®æ¸…ç†ã€æ¡ä»¶åˆ¤æ–­ï¼‰
- æŸ¥è¯¢æ¡ä»¶æ„å»ºï¼ˆåˆ¤æ–­æ˜¯å¦æ·»åŠ æŸ¥è¯¢æ¡ä»¶ï¼‰

**è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [å‚æ•°æ ¡éªŒè®¾è®¡ - ValidationUtils å·¥å…·ç±»](#6-validationutils-å·¥å…·ç±»)**

### 3. å…¶ä»–å·¥å…·ç±»

**ä½ç½®**ï¼š`apps/backend-service/src/main/java/com/vben/admin/core/utils/`

**å·¥å…·ç±»åˆ—è¡¨**ï¼š
- `ValidationUtils` - éªŒè¯å·¥å…·ï¼ˆå­—ç¬¦ä¸²æ ¡éªŒã€ID æ ¡éªŒã€æ•°æ®æ¸…ç†ï¼‰
- `SecurityUtils` - å®‰å…¨å·¥å…·ï¼ˆè·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼‰
- `JwtUtils` - JWT å·¥å…·
- `CookieUtils` - Cookie å·¥å…·
- `QueryHelper` - æŸ¥è¯¢è¾…åŠ©å·¥å…·
- `OperationInfoParser` - æ“ä½œä¿¡æ¯è§£æå™¨
- `BrowserInfoParser` - æµè§ˆå™¨ä¿¡æ¯è§£æå™¨
- `MenuModuleResolver` - èœå•æ¨¡å—è§£æå™¨
- `SensitiveDataFilter` - æ•æ„Ÿä¿¡æ¯è¿‡æ»¤

**è¯´æ˜**ï¼š
- âœ… **ç»Ÿä¸€ä½ç½®**ï¼šæ‰€æœ‰å·¥å…·ç±»ç»Ÿä¸€æ”¾åœ¨ `core/utils/` ç›®å½•
- âœ… å·¥å…·ç±»åº”è¯¥æ˜¯é™æ€æ–¹æ³•æˆ–å•ä¾‹æ¨¡å¼
- âœ… ä½¿ç”¨ `public static` æ–¹æ³•æä¾›å·¥å…·åŠŸèƒ½

---

## å®é™…ä½¿ç”¨ç¤ºä¾‹

### 1. å®Œæ•´çš„ CRUD æ¥å£å®ç°

```java
@RestController
@RequestMapping("/system/user")
@RequiredArgsConstructor
public class SystemUserController {

    private final UserService userService;

    // åˆ—è¡¨æŸ¥è¯¢
    @GetMapping
    public BaseResult<PageResult<UserVO>> getList(...) {
        PageResult<UserVO> result = userService.getUserList(...);
        return new BaseResult<>(result);
    }

    // è¯¦æƒ…æŸ¥è¯¢
    @GetMapping("/{id}")
    public BaseResult<UserVO> getById(
        @ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") @PathVariable String id
    ) {
        UserVO user = userService.getUserById(id);
        return new BaseResult<>(user);
    }

    // åˆ›å»º
    @PostMapping
    public BaseResult<String> create(@Validated(UserDTO.Create.class) @RequestBody UserDTO userDTO) {
        String id = userService.createUser(userDTO);
        return new BaseResult<>(id);
    }

    // æ›´æ–°
    @PutMapping("/{id}")
    public BaseResult<Boolean> update(
        @ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") @PathVariable String id,
        @Validated(UserDTO.Update.class) @RequestBody UserDTO userDTO
    ) {
        userService.updateUser(id, userDTO);
        return new BaseResult<>(true);
    }

    // åˆ é™¤
    @DeleteMapping("/{id}")
    public BaseResult<Boolean> delete(
        @ValidId(message = "ç”¨æˆ·IDä¸èƒ½ä¸ºç©ºæˆ–æ— æ•ˆå€¼") @PathVariable String id
    ) {
        userService.deleteUser(id);
        return new BaseResult<>(true);
    }
}
```

### 2. Service å±‚æŸ¥è¯¢å®ç°

```java
@Override
public PageResult<UserVO> getUserList(Integer page, Integer pageSize, String search, String username, String realName, String deptId, Integer status, String startTime, String endTime) {
    // æ„å»ºæŸ¥è¯¢æ¡ä»¶
    LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<>();

    // æœç´¢å…³é”®è¯å¤„ç†ï¼ˆä¼˜å…ˆçº§é«˜äº username/realNameï¼‰
    QueryHelper.applySearch(
            queryWrapper,
            SearchQueryConfig.<SysUser>of(search)
                    .searchField(SysUser::getUsername)
                    .searchField(SysUser::getRealName)
                    .fallbackField(SysUser::getUsername, username)
                    .fallbackField(SysUser::getRealName, realName)
    );

    // å…¶ä»–æŸ¥è¯¢æ¡ä»¶
    if (StringUtils.hasText(deptId)) {
        queryWrapper.eq(SysUser::getDeptId, deptId);
    }
    if (status != null) {
        queryWrapper.eq(SysUser::getStatus, status);
    }

    // æ—¶é—´èŒƒå›´æŸ¥è¯¢
    QueryHelper.applyTimeRange(queryWrapper, startTime, endTime, SysUser::getCreateTime);

    queryWrapper.orderByDesc(SysUser::getCreateTime);

    // åˆ†é¡µæŸ¥è¯¢
    Page<SysUser> pageParam = new Page<>(page, pageSize);
    IPage<SysUser> pageResult = userMapper.selectPage(pageParam, queryWrapper);

    // è½¬æ¢ä¸ºVO
    List<UserVO> voList = pageResult.getRecords().stream()
            .map(this::convertToVO)
            .collect(Collectors.toList());

    return PageResult.of(voList, pageResult.getTotal());
}
```

### 3. Options æ¥å£å®ç°

```java
@Override
public PageResult<UserVO> getUserOptions(UserOptionQueryDTO queryDTO) {
    // æ„å»ºæŸ¥è¯¢æ¡ä»¶ï¼ˆä¸ List æ¥å£ä¸€è‡´ï¼‰
    LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<>();
    // ... æŸ¥è¯¢æ¡ä»¶æ„å»º

    // æŸ¥è¯¢æ‰€æœ‰æ•°æ®ï¼ˆä¸åˆ†é¡µï¼‰
    List<SysUser> users = userMapper.selectList(queryWrapper);

    // åº”ç”¨ limit é™åˆ¶
    users = QueryHelper.applyLimit(users, queryDTO.getLimit());

    // è½¬æ¢ä¸ºVO
    List<UserVO> voList = users.stream()
            .map(this::convertToVO)
            .collect(Collectors.toList());

    return PageResult.of(voList, (long) voList.size());
}
```

---

## å‘½åè§„èŒƒ

### æ ¸å¿ƒåŸåˆ™ï¼šä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´

**ä¸šç•Œæœ€ä½³å®è·µ**ï¼šControllerã€Entityã€DTOã€VOã€Serviceã€Mapper ä½¿ç”¨**ç›¸åŒçš„ä¸šåŠ¡åç§°**ï¼Œåªæ˜¯åç¼€ä¸åŒã€‚

| å±‚çº§ | å‘½åè§„åˆ™ | ç¤ºä¾‹ | è¯´æ˜ |
| --- | --- | --- | --- |
| **Controller** | `ä¸šåŠ¡åç§°` + `Controller` | `UserController` | é€šè¿‡ `@RequestMapping` è·¯å¾„åŒºåˆ†åŠŸèƒ½ |
| **Service æ¥å£** | `ä¸šåŠ¡åç§°` + `Service` | `UserService` | ä¸šåŠ¡æœåŠ¡æ¥å£ |
| **Service å®ç°** | `ä¸šåŠ¡åç§°` + `ServiceImpl` | `UserServiceImpl` | ä¸šåŠ¡æœåŠ¡å®ç° |
| **Mapper** | `ä¸šåŠ¡åç§°` + `Mapper` | `UserMapper` | æ•°æ®è®¿é—®å±‚ |
| **Entity** | `è¡¨å‰ç¼€` + `ä¸šåŠ¡åç§°` | `SysUser` | å¯¹åº”æ•°æ®åº“è¡¨ `sys_user` |
| **DTO** | `ä¸šåŠ¡åç§°` + `DTO` | `UserDTO` | æ•°æ®ä¼ è¾“å¯¹è±¡ |
| **VO** | `ä¸šåŠ¡åç§°` + `VO` | `UserVO` | è§†å›¾å¯¹è±¡ |

### å‘½åå¯¹åº”å…³ç³»è¡¨

| ä¸šåŠ¡åç§° | Controller | Service | Mapper | Entity | DTO | VO | è·¯å¾„ |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **User** | `UserController` | `UserService` | `UserMapper` | `SysUser` | `UserDTO` | `UserVO` | `/system/user` |
| **User** | `UserProfileController` | `UserService`ï¼ˆå¤ç”¨ï¼‰ | `UserMapper`ï¼ˆå¤ç”¨ï¼‰ | `SysUser`ï¼ˆå¤ç”¨ï¼‰ | `UserDTO`ï¼ˆå¤ç”¨ï¼‰ | `UserVO`ï¼ˆå¤ç”¨ï¼‰ | `/user` |
| **Role** | `RoleController` | `RoleService` | `RoleMapper` | `SysRole` | `RoleDTO` | `RoleVO` | `/system/role` |
| **Menu** | `MenuController` | `MenuService` | `MenuMapper` | `SysMenu` | `MenuDTO` | `MenuVO` | `/system/menu` |
| **Menu** | `MenuRouterController` | `MenuService`ï¼ˆå¤ç”¨ï¼‰ | `MenuMapper`ï¼ˆå¤ç”¨ï¼‰ | `SysMenu`ï¼ˆå¤ç”¨ï¼‰ | - | `MenuVO`ï¼ˆå¤ç”¨ï¼‰ | `/menu` |
| **Dept** | `DeptController` | `DeptService` | `DeptMapper` | `SysDept` | `DeptDTO` | `DeptVO` | `/system/dept` |
| **OperationLog** | `OperationLogController` | `OperationLogService` | `OperationLogMapper` | `SysOperationLog` | `OperationLogQueryDTO` | `OperationLogVO` | `/system/operation-log` |
| **Auth** | `AuthController` | `AuthService` | - | - | `LoginDTO` | `LoginResultVO` | `/auth` |

**è¯´æ˜**ï¼š
- âœ… **ä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´**ï¼šæ‰€æœ‰å±‚çº§ä½¿ç”¨ç›¸åŒçš„ä¸šåŠ¡åç§°ï¼ˆå¦‚ `User`ï¼‰
- âœ… **Entity æœ‰å‰ç¼€**ï¼š`SysUser`ï¼ˆå¯¹åº”æ•°æ®åº“è¡¨ `sys_user`ï¼‰ï¼Œè¿™æ˜¯åˆç†çš„
- âœ… **é€šè¿‡è·¯å¾„åŒºåˆ†åŠŸèƒ½**ï¼šç®¡ç†ç«¯ CRUD ä½¿ç”¨ `/system/*`ï¼Œç”¨æˆ·ä¸ªäººä¸­å¿ƒä½¿ç”¨ `/*`
- âœ… **ç¬¦åˆä¸šç•Œæ ‡å‡†**ï¼šéµå¾ª Spring Boot æœ€ä½³å®è·µ

### Swagger æ³¨è§£è§„èŒƒ

**ç»Ÿä¸€è§„èŒƒ**ï¼š
- **Controller ç±»**: `@Tag(name = "...")`ï¼ˆSpringDoc OpenAPI 3ï¼Œæ›¿ä»£ Springfox çš„ `@Api`ï¼‰
- **Controller æ–¹æ³•**: `@Operation(summary = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- **Controller å‚æ•°**: `@Parameter(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- **DTO/VO å­—æ®µ**: `@Schema(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰

**ç¤ºä¾‹**ï¼š
```java
// Controller ç±»
@Tag(name = "ç³»ç»Ÿç”¨æˆ·ç®¡ç†")  // âœ… ä½¿ç”¨ @Tagï¼ˆSpringDoc OpenAPI 3ï¼‰
@RestController
@RequestMapping("/system/user")
public class UserController {
    // ...
}

// DTO å­—æ®µ
@Schema(description = "ç”¨æˆ·å", example = "admin")
private String username;
```

---

## æ€»ç»“

Vue Vben Admin åç«¯å¼€å‘è§„èŒƒç‰¹ç‚¹ï¼š

1. **åˆ†å±‚æ¸…æ™°**ï¼šController â†’ Service â†’ Mapper â†’ Database
2. **ç»Ÿä¸€å“åº”**ï¼š`BaseResult<T>` å’Œ `PageResult<T>`
3. **ç±»å‹å®‰å…¨**ï¼šä½¿ç”¨ `LambdaQueryWrapper` å’Œæ³›å‹
4. **ä»£ç å¤ç”¨**ï¼šä½¿ç”¨å·¥å…·ç±»å‡å°‘é‡å¤ä»£ç 
5. **å‚æ•°å°è£…**ï¼šOptions æ¥å£ä½¿ç”¨ DTO
6. **è¯­ä¹‰åŒ–å‘½å**ï¼šä½¿ç”¨ `search` ä»£æ›¿ `keyword`
7. **RESTful è®¾è®¡**ï¼šç¬¦åˆ REST è§„èŒƒ
8. **å¼‚å¸¸å¤„ç†**ï¼šç»Ÿä¸€å¼‚å¸¸å¤„ç†å’Œä¸šåŠ¡å¼‚å¸¸
9. **å‘½åè§„èŒƒ**ï¼šä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´ï¼Œé€šè¿‡è·¯å¾„åŒºåˆ†åŠŸèƒ½
10. **å·¥å…·ç±»ç»Ÿä¸€**ï¼šæ‰€æœ‰å·¥å…·ç±»ç»Ÿä¸€æ”¾åœ¨ `core/utils/` ç›®å½•
11. **ä»£ç ä¼˜åŒ–**ï¼šService å®ç°ç±»éµå¾ªç»Ÿä¸€çš„ä¼˜åŒ–æ¨¡å¼ï¼Œæå–ç§æœ‰æ–¹æ³•æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

åç«¯å¼€å‘æ ¸å¿ƒæµç¨‹ï¼š
1. Controller æ¥æ”¶è¯·æ±‚ â†’ å‚æ•°æ ¡éªŒ
2. Service å¤„ç†ä¸šåŠ¡é€»è¾‘ â†’ è°ƒç”¨ Mapper
3. Mapper æ‰§è¡Œæ•°æ®åº“æ“ä½œ â†’ è¿”å› Entity
4. Service è½¬æ¢ä¸º VO â†’ è¿”å›ç»“æœ
5. Controller å°è£…ä¸º BaseResult â†’ è¿”å›å‰ç«¯

### Service å±‚ä¼˜åŒ–æ¨¡å¼æ€»ç»“

æ‰€æœ‰ Service å®ç°ç±»åº”éµå¾ªä»¥ä¸‹ä¼˜åŒ–æ¨¡å¼ï¼š

1. **æå– `getXxxByIdOrThrow()`** - ç»Ÿä¸€å®ä½“æŸ¥è¯¢å’Œå¼‚å¸¸å¤„ç†
2. **æå–éªŒè¯æ–¹æ³•** - ç»Ÿä¸€éªŒè¯é€»è¾‘ï¼ˆ`validateXxx()`ã€`checkXxx()`ï¼‰
3. **æå–æ„å»ºæ–¹æ³•** - ç»Ÿä¸€å®ä½“æ„å»ºé€»è¾‘ï¼ˆ`buildXxxEntity()`ï¼‰
4. **æå–æ›´æ–°æ–¹æ³•** - ç»Ÿä¸€æ›´æ–°é€»è¾‘ï¼ˆ`updateXxxBasicInfo()`ï¼‰
5. **æå–å·¥å…·æ–¹æ³•** - å¤ç”¨é€šç”¨é€»è¾‘ï¼ˆå¦‚ `getUserName()`ï¼‰

**ä¼˜åŒ–æ•ˆæœ**ï¼š
- âœ… å¯è¯»æ€§ï¼šæ–¹æ³•èŒè´£å•ä¸€ï¼Œé€»è¾‘æ¸…æ™°
- âœ… å¯ç»´æŠ¤æ€§ï¼šæå–çš„ç§æœ‰æ–¹æ³•ä¾¿äºå¤ç”¨å’Œæµ‹è¯•
- âœ… å¯æ‰©å±•æ€§ï¼šæ–°å¢åŠŸèƒ½æ—¶æ›´å®¹æ˜“æ‰©å±•
- âœ… ä»£ç é‡ï¼šå‡å°‘é‡å¤ä»£ç ï¼Œæé«˜ä»£ç è´¨é‡

---

## åç»­å¼€å‘æ¨¡å¼

> ğŸ“– **è¯¦ç»†å¼€å‘æ¨¡å¼æ–‡æ¡£**ï¼šè¯·å‚è€ƒ [`apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md`](../../apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md#åç»­å¼€å‘æ¨¡å¼)

### 1. æ–°åŠŸèƒ½å¼€å‘æµç¨‹

**åˆ›å»ºæ–°æ¨¡å—çš„æ ‡å‡†æµç¨‹**ï¼ˆ8 æ­¥ï¼‰ï¼š

1. **åˆ›å»º Entity** - æ•°æ®åº“è¡¨æ˜ å°„
2. **åˆ›å»º DTO** - è¯·æ±‚å‚æ•°å¯¹è±¡
3. **åˆ›å»º VO** - å“åº”æ•°æ®å¯¹è±¡
4. **åˆ›å»º Mapper** - æ•°æ®è®¿é—®å±‚æ¥å£
5. **åˆ›å»º Service æ¥å£** - ä¸šåŠ¡æœåŠ¡æ¥å£
6. **åˆ›å»º Service å®ç°** - ä¸šåŠ¡é€»è¾‘å®ç°ï¼ˆéµå¾ªä¼˜åŒ–æ¨¡å¼ï¼‰
7. **åˆ›å»º Controller** - RESTful API æ§åˆ¶å™¨
8. **åˆ›å»ºæ•°æ®åº“è¡¨** - SQL è„šæœ¬

**è¯¦ç»†ç¤ºä¾‹ä»£ç è¯·å‚è€ƒæŠ€æœ¯æ ˆåˆ†ææ–‡æ¡£**ã€‚

### 2. ä»£ç å®¡æŸ¥æ¸…å•

#### Controller å±‚å®¡æŸ¥

- [ ] æ˜¯å¦ä½¿ç”¨ `@RequiredArgsConstructor` è¿›è¡Œä¾èµ–æ³¨å…¥
- [ ] æ˜¯å¦ç»Ÿä¸€è¿”å› `BaseResult<T>`
- [ ] æ˜¯å¦ä½¿ç”¨ RESTful è·¯ç”±è®¾è®¡
- [ ] æ˜¯å¦ä½¿ç”¨ `@Validated` è¿›è¡Œå‚æ•°æ ¡éªŒ
- [ ] æ˜¯å¦æ·»åŠ  Swagger æ³¨è§£ï¼ˆ`@Api`ã€`@Operation`ã€`@Parameter`ã€`@Schema`ï¼‰

#### Service å±‚å®¡æŸ¥

- [ ] æ˜¯å¦æå– `getXxxByIdOrThrow()` æ–¹æ³•
- [ ] æ˜¯å¦æå–éªŒè¯æ–¹æ³•ï¼ˆ`validateXxx()`ã€`checkXxx()`ï¼‰
- [ ] æ˜¯å¦æå–æ„å»ºæ–¹æ³•ï¼ˆ`buildXxxEntity()`ï¼‰
- [ ] æ˜¯å¦æå–æ›´æ–°æ–¹æ³•ï¼ˆ`updateXxxBasicInfo()`ï¼‰
- [ ] æ˜¯å¦ä½¿ç”¨ `@Transactional` æ ‡æ³¨å†™æ“ä½œ
- [ ] æ˜¯å¦ä½¿ç”¨å·¥å…·ç±»ï¼ˆ`QueryHelper`ã€`TreeHelper` ç­‰ï¼‰

#### Mapper å±‚å®¡æŸ¥

- [ ] æ˜¯å¦ç»§æ‰¿ `BaseMapper<T>`
- [ ] æ˜¯å¦ä½¿ç”¨ `LambdaQueryWrapper` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
- [ ] æ˜¯å¦ä½¿ç”¨é€»è¾‘åˆ é™¤ï¼ˆ`@TableLogic`ï¼‰

#### Model å±‚å®¡æŸ¥

- [ ] Entity æ˜¯å¦ä½¿ç”¨ `@TableName` å’Œ `@TableId`
- [ ] Entity æ˜¯å¦ä½¿ç”¨ `@TableLogic` æ ‡æ³¨é€»è¾‘åˆ é™¤å­—æ®µ
- [ ] DTO æ˜¯å¦ä½¿ç”¨ `@Schema` æ³¨è§£
- [ ] DTO æ˜¯å¦ä½¿ç”¨ Bean Validation æ³¨è§£
- [ ] VO æ˜¯å¦åªåŒ…å«éœ€è¦è¿”å›ç»™å‰ç«¯çš„å­—æ®µ

### 3. æµ‹è¯•è§„èŒƒ

#### å•å…ƒæµ‹è¯•

```java
@SpringBootTest
@AutoConfigureMockMvc
class NoticeControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void testGetNoticeList() throws Exception {
        mockMvc.perform(get("/system/notice")
                        .param("page", "1")
                        .param("pageSize", "20"))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.code").value(0));
    }
}
```

#### é›†æˆæµ‹è¯•

```java
@SpringBootTest
@Transactional
class NoticeServiceTest {

    @Autowired
    private NoticeService noticeService;

    @Test
    void testCreateNotice() {
        NoticeDTO noticeDTO = new NoticeDTO();
        noticeDTO.setTitle("æµ‹è¯•é€šçŸ¥");
        noticeDTO.setContent("è¿™æ˜¯ä¸€æ¡æµ‹è¯•é€šçŸ¥");

        String id = noticeService.createNotice(noticeDTO);
        assertNotNull(id);

        NoticeVO notice = noticeService.getNoticeById(id);
        assertEquals("æµ‹è¯•é€šçŸ¥", notice.getTitle());
    }
}
```

---

## æœ€ä½³å®è·µå»ºè®®

> ğŸ“– **è¯¦ç»†æœ€ä½³å®è·µæ–‡æ¡£**ï¼šè¯·å‚è€ƒ [`apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md`](../../apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md#æœ€ä½³å®è·µå»ºè®®)

### 1. ä»£ç è´¨é‡

#### éµå¾ª DRY åŸåˆ™

- âœ… æå–å…¬å…±æ–¹æ³•ï¼Œé¿å…é‡å¤ä»£ç 
- âœ… ä½¿ç”¨å·¥å…·ç±»ï¼ˆ`QueryHelper`ã€`TreeHelper` ç­‰ï¼‰
- âœ… ä½¿ç”¨å¸¸é‡å®šä¹‰é­”æ³•å­—ç¬¦ä¸²

#### ä¿æŒæ–¹æ³•ç®€æ´

- âœ… æ–¹æ³•èŒè´£å•ä¸€ï¼Œé€»è¾‘æ¸…æ™°
- âœ… æ–¹æ³•é•¿åº¦æ§åˆ¶åœ¨ 50 è¡Œä»¥å†…
- âœ… å¤æ‚é€»è¾‘æå–ä¸ºç§æœ‰æ–¹æ³•

#### ç±»å‹å®‰å…¨

- âœ… ä½¿ç”¨ `LambdaQueryWrapper` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
- âœ… ä½¿ç”¨æ³›å‹æé«˜ä»£ç å¤ç”¨æ€§
- âœ… é¿å…ä½¿ç”¨ `Object` ç±»å‹ï¼ˆé™¤éå¿…è¦ï¼‰

### 2. æ€§èƒ½ä¼˜åŒ–

#### æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

- âœ… ä½¿ç”¨ç´¢å¼•ï¼ˆåœ¨æ•°æ®åº“è¡¨è®¾è®¡ä¸­æ·»åŠ åˆé€‚çš„ç´¢å¼•ï¼‰
- âœ… é¿å… N+1 æŸ¥è¯¢é—®é¢˜ï¼ˆä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ï¼‰
- âœ… ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

#### ç¼“å­˜ç­–ç•¥

- âœ… å¯¹äºé¢‘ç¹æŸ¥è¯¢çš„æ•°æ®ï¼Œè€ƒè™‘ä½¿ç”¨ Redis ç¼“å­˜
- âœ… ç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®åˆç†
- âœ… ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼ˆCache-Asideã€Write-Through ç­‰ï¼‰

### 3. å®‰å…¨è§„èŒƒ

#### è®¤è¯æˆæƒ

- âœ… æ‰€æœ‰æ¥å£ï¼ˆé™¤ç™»å½•ã€æ³¨å†Œå¤–ï¼‰éƒ½éœ€è¦è®¤è¯
- âœ… ä½¿ç”¨ JWT Token è¿›è¡Œæ— çŠ¶æ€è®¤è¯
- âœ… Token è¿‡æœŸæ—¶é—´è®¾ç½®åˆç†ï¼ˆAccessToken 2å°æ—¶ï¼ŒRefreshToken 7å¤©ï¼‰

#### æ•°æ®å®‰å…¨

- âœ… å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
- âœ… æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ä¸åœ¨æ—¥å¿—ä¸­è¾“å‡º
- âœ… ä½¿ç”¨ `SensitiveDataFilter` è¿‡æ»¤æ•æ„Ÿæ•°æ®

#### SQL æ³¨å…¥é˜²æŠ¤

- âœ… ä½¿ç”¨ `LambdaQueryWrapper` è¿›è¡Œç±»å‹å®‰å…¨çš„æŸ¥è¯¢
- âœ… é¿å…ç›´æ¥æ‹¼æ¥ SQL å­—ç¬¦ä¸²
- âœ… ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢

### 4. å¯ç»´æŠ¤æ€§

#### ä»£ç æ³¨é‡Š

- âœ… ç±»å’Œæ–¹æ³•æ·»åŠ  JavaDoc æ³¨é‡Š
- âœ… å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- âœ… å¸¸é‡æ·»åŠ æ³¨é‡Šè¯´æ˜

#### æ—¥å¿—è§„èŒƒ

- âœ… ä½¿ç”¨ `@Slf4j` æ³¨è§£
- âœ… å…³é”®æ“ä½œè®°å½•æ—¥å¿—ï¼ˆINFO çº§åˆ«ï¼‰
- âœ… å¼‚å¸¸è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆERROR çº§åˆ«ï¼‰
- âœ… é¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯

#### å¼‚å¸¸å¤„ç†

- âœ… ä½¿ç”¨ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼ˆ`GlobalExceptionHandler`ï¼‰
- âœ… å¼‚å¸¸æ¶ˆæ¯æ¸…æ™°æ˜ç¡®ï¼Œä½¿ç”¨ä¸­æ–‡
- âœ… ä¸è¦æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯

### 5. æ‰©å±•æ€§

#### æ¥å£è®¾è®¡

- âœ… æ¥å£è®¾è®¡è€ƒè™‘æœªæ¥æ‰©å±•
- âœ… ä½¿ç”¨ DTO å°è£…å‚æ•°ï¼Œä¾¿äºåç»­æ·»åŠ å­—æ®µ
- âœ… ä½¿ç”¨ VO è¿”å›æ•°æ®ï¼Œä¾¿äºåç»­æ·»åŠ å­—æ®µ

#### æ¨¡å—åŒ–è®¾è®¡

- âœ… åŠŸèƒ½æ¨¡å—åŒ–ï¼Œä¾¿äºç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- âœ… ä½¿ç”¨ Service æ¥å£å’Œå®ç°åˆ†ç¦»
- âœ… å·¥å…·ç±»ç»Ÿä¸€æ”¾åœ¨ `core/utils/` ç›®å½•

---

## ç›¸å…³æ–‡æ¡£

- ğŸ“– **æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ**ï¼š[`apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md`](../../apps/backend-service/docs/æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ.md)
- ğŸ“– **å‘½åè§„èŒƒè¯´æ˜**ï¼š[`apps/backend-service/.cursor/rules/å‘½åè§„èŒƒè¯´æ˜.mdc`](../../apps/backend-service/.cursor/rules/å‘½åè§„èŒƒè¯´æ˜.mdc)
- ğŸ“– **Token æœ€ä½³å®è·µ**ï¼š[`apps/backend-service/docs/TOKEN_BEST_PRACTICES.md`](../../apps/backend-service/docs/TOKEN_BEST_PRACTICES.md)
