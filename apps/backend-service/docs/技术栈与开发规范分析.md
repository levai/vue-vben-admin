# Vben Admin åç«¯æœåŠ¡ - æŠ€æœ¯æ ˆä¸å¼€å‘è§„èŒƒåˆ†æ

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯æ ˆåˆ†æ](#æŠ€æœ¯æ ˆåˆ†æ)
2. [ä»£ç è§„èŒƒæ€»ç»“](#ä»£ç è§„èŒƒæ€»ç»“)
3. [æ¶æ„è®¾è®¡æ¨¡å¼](#æ¶æ„è®¾è®¡æ¨¡å¼)
4. [åç»­å¼€å‘æ¨¡å¼](#åç»­å¼€å‘æ¨¡å¼)
5. [æœ€ä½³å®è·µå»ºè®®](#æœ€ä½³å®è·µå»ºè®®)

---

## æŠ€æœ¯æ ˆåˆ†æ

> **ğŸ“Œ æŠ€æœ¯æ ˆç‰ˆæœ¬è¯´æ˜**  
> æœ¬æ–‡æ¡£åŸºäº **Spring Boot 3.2.0 + Java 17** æŠ€æœ¯æ ˆç¼–å†™ã€‚

### 1. æ ¸å¿ƒæ¡†æ¶

| æŠ€æœ¯            | ç‰ˆæœ¬  | ç”¨é€”     | è¯´æ˜               |
| --------------- | ----- | -------- | ------------------ |
| **Spring Boot** | 3.2.0 | æ ¸å¿ƒæ¡†æ¶ | ä¼ä¸šçº§åº”ç”¨å¼€å‘æ¡†æ¶ |
| **Java**        | 17    | ç¼–ç¨‹è¯­è¨€ | LTS ç‰ˆæœ¬ï¼Œç¨³å®šå¯é  |
| **Maven**       | 3.6+  | æ„å»ºå·¥å…· | ä¾èµ–ç®¡ç†å’Œé¡¹ç›®æ„å»º |

### 2. æ•°æ®å±‚

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | ç‰¹æ€§ |
| --- | --- | --- | --- |
| **MySQL** | 8.0+ | å…³ç³»å‹æ•°æ®åº“ | ä¸»æ•°æ®åº“ |
| **MyBatis Plus** | 3.5.7 | ORM æ¡†æ¶ | å¢å¼º MyBatisï¼Œç®€åŒ– CRUDï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰ |
| **Druid** | 1.2.23 | æ•°æ®åº“è¿æ¥æ±  | ç›‘æ§ã€ç»Ÿè®¡ã€SQL é˜²ç«å¢™ |
| **MySQL Connector** | 8.2.0 | MySQL é©±åŠ¨ | ä½¿ç”¨ `mysql-connector-j`ï¼ˆæ›¿ä»£ `mysql-connector-java`ï¼‰ |

**MyBatis Plus ç‰¹æ€§**ï¼š

- âœ… åˆ†é¡µæ’ä»¶ï¼š`PaginationInnerInterceptor`
- âœ… é€»è¾‘åˆ é™¤ï¼š`@TableLogic`ï¼ˆè‡ªåŠ¨è¿‡æ»¤ deleted=1ï¼‰
- âœ… è‡ªåŠ¨å¡«å……ï¼š`FieldFillHandler`ï¼ˆè‡ªåŠ¨å¡«å…… createTimeã€updateTime ç­‰ï¼‰
- âœ… ID ç”Ÿæˆç­–ç•¥ï¼š`assign_id`ï¼ˆé›ªèŠ±ç®—æ³•ï¼‰
- âœ… ç±»å‹å®‰å…¨ï¼š`LambdaQueryWrapper`ï¼ˆé¿å…å­—ç¬¦ä¸²æ‹¼æ¥ï¼‰
- âœ… **Spring Boot 3 æ”¯æŒ**ï¼šä½¿ç”¨ `mybatis-plus-spring-boot3-starter`ï¼ˆæ›¿ä»£ `mybatis-plus-boot-starter`ï¼‰

### 3. å®‰å…¨è®¤è¯

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | é…ç½® |
| --- | --- | --- | --- |
| **Spring Security** | 3.2.0 | å®‰å…¨æ¡†æ¶ | JWT æ— çŠ¶æ€è®¤è¯ï¼ˆè·Ÿéš Spring Boot ç‰ˆæœ¬ï¼‰ |
| **JWT (jjwt)** | 0.12.5 | Token è®¤è¯ | HS512 ç­¾åç®—æ³• |

**JWT é…ç½®**ï¼š

- **AccessToken**ï¼š2å°æ—¶ï¼ˆ7200000msï¼‰- ç¬¦åˆä¸šç•Œæ ‡å‡†
- **RefreshToken**ï¼š7å¤©ï¼ˆ604800000msï¼‰- ç¬¦åˆä¸šç•Œæ ‡å‡†
- **ç­¾åç®—æ³•**ï¼šHS512ï¼ˆHMAC-SHA512ï¼‰

**Spring Security é…ç½®**ï¼š

- âœ… æ— çŠ¶æ€ Sessionï¼ˆSTATELESSï¼‰
- âœ… JWT è®¤è¯è¿‡æ»¤å™¨ï¼ˆ`JwtAuthenticationFilter`ï¼‰
- âœ… è‡ªå®šä¹‰è®¤è¯å…¥å£ç‚¹ï¼ˆ`CustomAuthenticationEntryPoint`ï¼‰
- âœ… è‡ªå®šä¹‰æ‹’ç»å¤„ç†å™¨ï¼ˆ`CustomAccessDeniedHandler`ï¼‰

### 4. API æ–‡æ¡£

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | ç‰¹æ€§ |
| --- | --- | --- | --- |
| **Knife4j** | 4.4.0 | API æ–‡æ¡£ | åŸºäº SpringDoc OpenAPI 3ï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰ |

**Swagger æ³¨è§£è§„èŒƒ**ï¼ˆSpringDoc OpenAPI 3ï¼‰ï¼š

- Controller ç±»ï¼š`@Tag(name = "...")`ï¼ˆOpenAPI 3.0ï¼Œæ›¿ä»£ Springfox çš„ `@Api`ï¼‰
- Controller æ–¹æ³•ï¼š`@Operation(summary = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- Controller å‚æ•°ï¼š`@Parameter(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰
- DTO/VO å­—æ®µï¼š`@Schema(description = "...")`ï¼ˆOpenAPI 3.0ï¼‰

**é‡è¦å˜æ›´**ï¼š

- âœ… ä» Springfox è¿ç§»åˆ° SpringDoc OpenAPI 3
- âœ… ä½¿ç”¨ `knife4j-openapi3-jakarta-spring-boot-starter`ï¼ˆSpring Boot 3 ä¸“ç”¨ç‰ˆæœ¬ï¼‰
- âœ… æ³¨è§£ä» `javax` åŒ…è¿ç§»åˆ° `jakarta` åŒ…

### 5. å·¥å…·åº“

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | å¸¸ç”¨æ³¨è§£/ç±» |
| --- | --- | --- | --- |
| **Lombok** | 1.18.32 | ä»£ç ç”Ÿæˆ | `@Data`ã€`@RequiredArgsConstructor`ã€`@Slf4j` |
| **Hutool** | 5.8.26 | Java å·¥å…·ç±»åº“ | å­—ç¬¦ä¸²ã€æ—¥æœŸã€åŠ å¯†ç­‰å·¥å…· |
| **Apache Commons Lang3** | - | å·¥å…·ç±» | å­—ç¬¦ä¸²ã€é›†åˆç­‰å·¥å…· |

### 6. å…¶ä»–ä¾èµ–

| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” | è¯´æ˜ |
| --- | --- | --- | --- |
| **Spring Boot Validation** | - | å‚æ•°æ ¡éªŒ | Bean Validation |
| **Spring Boot AOP** | - | é¢å‘åˆ‡é¢ç¼–ç¨‹ | æ“ä½œæ—¥å¿—åˆ‡é¢ |
| **JAXB API** | 4.0.1 | XML ç»‘å®š | Java 17+ éœ€è¦å•ç‹¬æ·»åŠ ï¼ˆä½¿ç”¨ `jakarta.xml.bind-api`ï¼‰ |

---

## ä»£ç è§„èŒƒæ€»ç»“

### 1. é¡¹ç›®ç»“æ„ï¼ˆåˆ†å±‚æ¶æ„ï¼‰

```
com.vben.admin/
â”œâ”€â”€ BackendServiceApplication.java    # å¯åŠ¨ç±»
â”œâ”€â”€ config/                           # é…ç½®å±‚
â”‚   â”œâ”€â”€ SecurityConfiguration.java   # Spring Security é…ç½®
â”‚   â”œâ”€â”€ MybatisPlusConfig.java      # MyBatis Plus é…ç½®
â”‚   â”œâ”€â”€ Knife4jConfig.java           # Swagger é…ç½®
â”‚   â”œâ”€â”€ CorsConfig.java              # è·¨åŸŸé…ç½®
â”‚   â”œâ”€â”€ AsyncConfig.java             # å¼‚æ­¥é…ç½®
â”‚   â””â”€â”€ FieldFillHandler.java        # å­—æ®µè‡ªåŠ¨å¡«å……
â”œâ”€â”€ controller/                       # æ§åˆ¶å±‚ï¼ˆRESTful APIï¼‰
â”‚   â”œâ”€â”€ AuthController.java          # è®¤è¯æ§åˆ¶å™¨ï¼ˆ/authï¼‰
â”‚   â”œâ”€â”€ UserController.java          # ç”¨æˆ·ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/userï¼‰
â”‚   â”œâ”€â”€ UserProfileController.java   # ç”¨æˆ·ä¸ªäººä¸­å¿ƒæ§åˆ¶å™¨ï¼ˆ/userï¼‰
â”‚   â”œâ”€â”€ RoleController.java          # è§’è‰²ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/roleï¼‰
â”‚   â”œâ”€â”€ MenuController.java          # èœå•ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/menuï¼‰
â”‚   â”œâ”€â”€ MenuRouterController.java    # èœå•è·¯ç”±æ§åˆ¶å™¨ï¼ˆ/menuï¼‰
â”‚   â”œâ”€â”€ DeptController.java          # éƒ¨é—¨ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/deptï¼‰
â”‚   â””â”€â”€ OperationLogController.java  # æ“ä½œæ—¥å¿—ç®¡ç†æ§åˆ¶å™¨ï¼ˆ/system/operation-logï¼‰
â”œâ”€â”€ service/                          # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ AuthService.java             # è®¤è¯æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ UserService.java            # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ RoleService.java            # è§’è‰²æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ MenuService.java            # èœå•æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ DeptService.java            # éƒ¨é—¨æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ OperationLogService.java    # æ“ä½œæ—¥å¿—æœåŠ¡æ¥å£
â”‚   â””â”€â”€ impl/                        # æœåŠ¡å®ç°
â”‚       â”œâ”€â”€ AuthServiceImpl.java
â”‚       â”œâ”€â”€ UserServiceImpl.java
â”‚       â””â”€â”€ ...
â”œâ”€â”€ mapper/                          # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisï¼‰
â”‚   â”œâ”€â”€ UserMapper.java
â”‚   â”œâ”€â”€ RoleMapper.java
â”‚   â”œâ”€â”€ MenuMapper.java
â”‚   â”œâ”€â”€ DeptMapper.java
â”‚   â”œâ”€â”€ OperationLogMapper.java
â”‚   â”œâ”€â”€ PermissionMapper.java        # æƒé™ç  Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ RoleMenuMapper.java          # è§’è‰²èœå•å…³è” Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â””â”€â”€ UserRoleMapper.java          # ç”¨æˆ·è§’è‰²å…³è” Mapperï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”œâ”€â”€ model/                           # æ•°æ®æ¨¡å‹å±‚
â”‚   â”œâ”€â”€ entity/                     # å®ä½“ç±»ï¼ˆæ•°æ®åº“è¡¨æ˜ å°„ï¼‰
â”‚   â”‚   â”œâ”€â”€ SysUser.java
â”‚   â”‚   â”œâ”€â”€ SysRole.java
â”‚   â”‚   â”œâ”€â”€ SysMenu.java
â”‚   â”‚   â”œâ”€â”€ SysDept.java
â”‚   â”‚   â”œâ”€â”€ SysOperationLog.java
â”‚   â”‚   â”œâ”€â”€ SysPermission.java       # æƒé™ç å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ SysRoleMenu.java         # è§’è‰²èœå•å…³è”å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ SysUserRole.java         # ç”¨æˆ·è§’è‰²å…³è”å®ä½“ï¼ˆå†…éƒ¨ä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ dto/                        # æ•°æ®ä¼ è¾“å¯¹è±¡ï¼ˆè¯·æ±‚å‚æ•°ï¼‰
â”‚   â”‚   â”œâ”€â”€ UserDTO.java
â”‚   â”‚   â”œâ”€â”€ RoleDTO.java
â”‚   â”‚   â”œâ”€â”€ MenuDTO.java
â”‚   â”‚   â”œâ”€â”€ DeptDTO.java
â”‚   â”‚   â”œâ”€â”€ OperationLogQueryDTO.java
â”‚   â”‚   â”œâ”€â”€ LoginDTO.java            # ç™»å½• DTO
â”‚   â”‚   â”œâ”€â”€ UserOptionQueryDTO.java   # ç”¨æˆ·é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â”‚   â”œâ”€â”€ RoleOptionQueryDTO.java   # è§’è‰²é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â”‚   â”œâ”€â”€ MenuOrderDTO.java        # èœå•æ’åº DTO
â”‚   â”‚   â”œâ”€â”€ BatchMenuOrderDTO.java    # æ‰¹é‡èœå•æ’åº DTO
â”‚   â”‚   â””â”€â”€ OptionQueryDTO.java       # é€šç”¨é€‰é¡¹æŸ¥è¯¢ DTO
â”‚   â””â”€â”€ vo/                         # è§†å›¾å¯¹è±¡ï¼ˆå“åº”æ•°æ®ï¼‰
â”‚       â”œâ”€â”€ UserVO.java
â”‚       â”œâ”€â”€ RoleVO.java
â”‚       â”œâ”€â”€ MenuVO.java
â”‚       â”œâ”€â”€ DeptVO.java
â”‚       â”œâ”€â”€ OperationLogVO.java
â”‚       â”œâ”€â”€ LoginResultVO.java      # ç™»å½•ç»“æœ VO
â”‚       â””â”€â”€ TreeOptionVO.java       # æ ‘å½¢é€‰é¡¹ VO
â””â”€â”€ core/                            # æ ¸å¿ƒåŠŸèƒ½
    â”œâ”€â”€ enums/                      # æšä¸¾ç±»
    â”‚   â”œâ”€â”€ OperationType.java       # æ“ä½œç±»å‹æšä¸¾
    â”‚   â”œâ”€â”€ ErrMsg.java              # é”™è¯¯æ¶ˆæ¯æšä¸¾
    â”‚   â””â”€â”€ BaseErrMsg.java          # åŸºç¡€é”™è¯¯æ¶ˆæ¯æšä¸¾
    â”œâ”€â”€ exception/                  # å¼‚å¸¸å¤„ç†
    â”‚   â”œâ”€â”€ BusinessException.java   # ä¸šåŠ¡å¼‚å¸¸
    â”‚   â”œâ”€â”€ GlobalExceptionHandler.java  # å…¨å±€å¼‚å¸¸å¤„ç†å™¨
    â”‚   â”œâ”€â”€ CustomAuthenticationEntryPoint.java  # è‡ªå®šä¹‰è®¤è¯å…¥å£ç‚¹
    â”‚   â””â”€â”€ CustomAccessDeniedHandler.java  # è‡ªå®šä¹‰æ‹’ç»å¤„ç†å™¨
    â”œâ”€â”€ filter/                     # è¿‡æ»¤å™¨
    â”‚   â””â”€â”€ JwtAuthenticationFilter.java  # JWT è®¤è¯è¿‡æ»¤å™¨
    â”œâ”€â”€ model/                      # é€šç”¨æ¨¡å‹
    â”‚   â”œâ”€â”€ BaseResult.java         # ç»Ÿä¸€å“åº”æ ¼å¼
    â”‚   â””â”€â”€ PageResult.java         # åˆ†é¡µå“åº”æ ¼å¼
    â”œâ”€â”€ utils/                       # å·¥å…·ç±»ï¼ˆç»Ÿä¸€ä½ç½®ï¼‰âœ…
    â”‚   â”œâ”€â”€ JwtUtils.java           # JWT å·¥å…·
    â”‚   â”œâ”€â”€ SecurityUtils.java      # å®‰å…¨å·¥å…·
    â”‚   â”œâ”€â”€ CookieUtils.java        # Cookie å·¥å…·
    â”‚   â”œâ”€â”€ QueryHelper.java        # æŸ¥è¯¢è¾…åŠ©å·¥å…·
    â”‚   â”œâ”€â”€ SearchQueryConfig.java  # æœç´¢æŸ¥è¯¢é…ç½®
    â”‚   â”œâ”€â”€ TreeHelper.java         # æ ‘å½¢ç»“æ„æ„å»ºå·¥å…·
    â”‚   â”œâ”€â”€ OperationInfoParser.java  # æ“ä½œä¿¡æ¯è§£æå™¨
    â”‚   â”œâ”€â”€ BrowserInfoParser.java  # æµè§ˆå™¨ä¿¡æ¯è§£æå™¨
    â”‚   â”œâ”€â”€ MenuModuleResolver.java # èœå•æ¨¡å—è§£æå™¨
    â”‚   â””â”€â”€ SensitiveDataFilter.java # æ•æ„Ÿä¿¡æ¯è¿‡æ»¤
    â”œâ”€â”€ aspect/                      # AOP åˆ‡é¢
    â”‚   â””â”€â”€ OperationLogAspect.java # æ“ä½œæ—¥å¿—åˆ‡é¢
    â””â”€â”€ task/                        # å®šæ—¶ä»»åŠ¡
        â””â”€â”€ OperationLogCleanupTask.java  # æ“ä½œæ—¥å¿—æ¸…ç†ä»»åŠ¡
```

### 2. å‘½åè§„èŒƒï¼ˆä¸šç•Œæ ‡å‡†ï¼‰

**æ ¸å¿ƒåŸåˆ™ï¼šä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´**

| å±‚çº§ | å‘½åè§„åˆ™ | ç¤ºä¾‹ | è¯´æ˜ |
| --- | --- | --- | --- |
| **Controller** | `ä¸šåŠ¡åç§°` + `Controller` | `UserController` | é€šè¿‡ `@RequestMapping` è·¯å¾„åŒºåˆ†åŠŸèƒ½ |
| **Service æ¥å£** | `ä¸šåŠ¡åç§°` + `Service` | `UserService` | ä¸šåŠ¡æœåŠ¡æ¥å£ |
| **Service å®ç°** | `ä¸šåŠ¡åç§°` + `ServiceImpl` | `UserServiceImpl` | ä¸šåŠ¡æœåŠ¡å®ç° |
| **Mapper** | `ä¸šåŠ¡åç§°` + `Mapper` | `UserMapper` | æ•°æ®è®¿é—®å±‚ |
| **Entity** | `è¡¨å‰ç¼€` + `ä¸šåŠ¡åç§°` | `SysUser` | å¯¹åº”æ•°æ®åº“è¡¨ `sys_user` |
| **DTO** | `ä¸šåŠ¡åç§°` + `DTO` | `UserDTO` | æ•°æ®ä¼ è¾“å¯¹è±¡ |
| **VO** | `ä¸šåŠ¡åç§°` + `VO` | `UserVO` | è§†å›¾å¯¹è±¡ |

**å‘½åå¯¹åº”å…³ç³»è¡¨**ï¼š

| ä¸šåŠ¡åç§° | Controller | Service | Mapper | Entity | DTO | VO | è·¯å¾„ |
| --- | --- | --- | --- | --- | --- | --- | --- |
| **User** | `UserController` | `UserService` | `UserMapper` | `SysUser` | `UserDTO` | `UserVO` | `/system/user` |
| **User** | `UserProfileController` | `UserService`ï¼ˆå¤ç”¨ï¼‰ | `UserMapper`ï¼ˆå¤ç”¨ï¼‰ | `SysUser`ï¼ˆå¤ç”¨ï¼‰ | `UserDTO`ï¼ˆå¤ç”¨ï¼‰ | `UserVO`ï¼ˆå¤ç”¨ï¼‰ | `/user` |
| **Role** | `RoleController` | `RoleService` | `RoleMapper` | `SysRole` | `RoleDTO` | `RoleVO` | `/system/role` |
| **Menu** | `MenuController` | `MenuService` | `MenuMapper` | `SysMenu` | `MenuDTO` | `MenuVO` | `/system/menu` |
| **Menu** | `MenuRouterController` | `MenuService`ï¼ˆå¤ç”¨ï¼‰ | `MenuMapper`ï¼ˆå¤ç”¨ï¼‰ | `SysMenu`ï¼ˆå¤ç”¨ï¼‰ | - | `MenuVO`ï¼ˆå¤ç”¨ï¼‰ | `/menu` |
| **Dept** | `DeptController` | `DeptService` | `DeptMapper` | `SysDept` | `DeptDTO` | `DeptVO` | `/system/dept` |
| **OperationLog** | `OperationLogController` | `OperationLogService` | `OperationLogMapper` | `SysOperationLog` | `OperationLogQueryDTO` | `OperationLogVO` | `/system/operation-log` |
| **Auth** | `AuthController` | `AuthService` | - | - | `LoginDTO` | `LoginResultVO` | `/auth` |

### 3. RESTful API è®¾è®¡è§„èŒƒ

**æ ‡å‡† CRUD æ¥å£**ï¼ˆæ‰€æœ‰æ¨¡å—ç»Ÿä¸€ä½¿ç”¨èµ„æºæ ¹è·¯å¾„ï¼‰ï¼š

```
GET    /system/user              # åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
GET    /system/user/{id}         # è¯¦æƒ…
POST   /system/user              # åˆ›å»º
PUT    /system/user/{id}         # æ›´æ–°
DELETE /system/user/{id}         # åˆ é™¤
```

**å­èµ„æºæ¥å£**ï¼š

```
GET    /system/user/options      # é€‰é¡¹åˆ—è¡¨ï¼ˆlimit é™åˆ¶ï¼‰
PUT    /system/user/{id}/status  # æ›´æ–°çŠ¶æ€ï¼ˆåŠ¨ä½œï¼‰
PUT    /system/user/{id}/password # é‡ç½®å¯†ç ï¼ˆåŠ¨ä½œï¼‰
```

**è§„èŒƒè¦ç‚¹**ï¼š

- âœ… **ç»Ÿä¸€ä½¿ç”¨èµ„æºæ ¹è·¯å¾„**ï¼šåˆ—è¡¨æ¥å£ä½¿ç”¨ `GET /resource`ï¼Œä¸ä½¿ç”¨ `/list` åç¼€
- âœ… **ç¬¦åˆ RESTful è§„èŒƒ**ï¼šèµ„æºå³ URLï¼Œé€šè¿‡ HTTP æ–¹æ³•åŒºåˆ†æ“ä½œ
- âœ… **ä¿æŒä¸€è‡´æ€§**ï¼šæ‰€æœ‰æ¨¡å—éµå¾ªç›¸åŒçš„è·¯ç”±è®¾è®¡è§„èŒƒ

### 4. ç»Ÿä¸€å“åº”æ ¼å¼

**æ‰€æœ‰æ¥å£ç»Ÿä¸€ä½¿ç”¨ `BaseResult<T>`**ï¼š

```json
{
  "code": 0,
  "message": "ok",
  "data": T
}
```

**åˆ†é¡µæ¥å£è¿”å› `PageResult<T>`**ï¼š

```json
{
  "code": 0,
  "message": "ok",
  "data": {
    "items": List<T>,
    "total": 100
  }
}
```

### 5. Service å±‚ä¼˜åŒ–æ¨¡å¼

**ç»Ÿä¸€çš„ä¼˜åŒ–æ¨¡å¼**ï¼ˆæ‰€æœ‰ Service å®ç°ç±»éµå¾ªï¼‰ï¼š

#### 5.1 å®ä½“æŸ¥è¯¢æ–¹æ³•

```java
/**
 * æ ¹æ®IDè·å–å®ä½“ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
 *
 * @param id å®ä½“ID
 * @return å®ä½“å¯¹è±¡
 * @throws BusinessException å¦‚æœå®ä½“ä¸å­˜åœ¨
 */
private SysUser getUserByIdOrThrow(String id) {
    SysUser user = userMapper.selectById(id);
    if (user == null) {
        throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
    }
    return user;
}
```

**å‘½åè§„èŒƒ**ï¼š`get{Entity}ByIdOrThrow(String id)`

#### 5.2 éªŒè¯æ–¹æ³•

```java
/**
 * éªŒè¯ç”¨æˆ·å”¯ä¸€æ€§ï¼ˆåˆ›å»ºæ—¶ï¼‰
 */
private void validateUserUniqueness(UserDTO userDTO, String id) {
    if (StringUtils.hasText(userDTO.getUsername())) {
        checkUsernameNotExists(userDTO.getUsername(), id);
    }
    if (StringUtils.hasText(userDTO.getPhone())) {
        checkPhoneNotExists(userDTO.getPhone(), id);
    }
}

/**
 * æ£€æŸ¥ç”¨æˆ·åä¸å­˜åœ¨
 */
private void checkUsernameNotExists(String username, String id) {
    LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<SysUser>()
            .eq(SysUser::getUsername, username);
    if (id != null) {
        queryWrapper.ne(SysUser::getId, id);
    }
    long count = userMapper.selectCount(queryWrapper);
    if (count > 0) {
        throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
    }
}
```

**å‘½åè§„èŒƒ**ï¼š

- éªŒè¯æ–¹æ³•ï¼š`validate{Field}NotExists()` æˆ– `validate{Entity}Uniqueness()`
- æ£€æŸ¥æ–¹æ³•ï¼š`check{Field}NotExists()`

#### 5.3 æ„å»ºæ–¹æ³•

```java
/**
 * æ„å»ºç”¨æˆ·å®ä½“
 *
 * @param userDTO ç”¨æˆ·DTO
 * @param id      ç”¨æˆ·IDï¼ˆæ›´æ–°æ—¶ä¼ å…¥ï¼Œåˆ›å»ºæ—¶ä¼ å…¥nullï¼‰
 * @return ç”¨æˆ·å®ä½“
 */
private SysUser buildUserEntity(UserDTO userDTO, String id) {
    SysUser user = new SysUser();
    user.setUsername(userDTO.getUsername());
    // ... å…¶ä»–å­—æ®µè®¾ç½®
    user.setStatus(userDTO.getStatus() != null ? userDTO.getStatus() : 1);
    return user;
}
```

**å‘½åè§„èŒƒ**ï¼š`build{Entity}Entity(DTO dto, String id)`

#### 5.4 æ›´æ–°æ–¹æ³•

```java
/**
 * æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯
 *
 * @param user    ç”¨æˆ·å®ä½“
 * @param userDTO ç”¨æˆ·DTO
 */
private void updateUserBasicInfo(SysUser user, UserDTO userDTO) {
    if (StringUtils.hasText(userDTO.getUsername())) {
        user.setUsername(userDTO.getUsername());
    }
    // ... å…¶ä»–å­—æ®µæ›´æ–°
}
```

**å‘½åè§„èŒƒ**ï¼š`update{Entity}BasicInfo(Entity entity, DTO dto)`

#### 5.5 å·¥å…·æ–¹æ³•

```java
/**
 * è·å–ç”¨æˆ·åç§°ï¼ˆä¼˜å…ˆä½¿ç”¨çœŸå®å§“åï¼Œå¦åˆ™ä½¿ç”¨ç”¨æˆ·åï¼‰
 *
 * @param userId ç”¨æˆ·ID
 * @return ç”¨æˆ·åç§°
 */
private String getUserName(String userId) {
    SysUser user = userMapper.selectById(userId);
    if (user != null) {
        return user.getRealName() != null ? user.getRealName() : user.getUsername();
    }
    return null;
}
```

**å‘½åè§„èŒƒ**ï¼šæ ¹æ®å…·ä½“åŠŸèƒ½å‘½åï¼Œå¦‚ `getUserName()`ã€`getDeptName()` ç­‰

### 6. æ•°æ®åº“æ“ä½œè§„èŒƒ

#### 6.1 ä½¿ç”¨ LambdaQueryWrapperï¼ˆç±»å‹å®‰å…¨ï¼‰

```java
// âœ… æ­£ç¡®ï¼šä½¿ç”¨ LambdaQueryWrapper
LambdaQueryWrapper<SysUser> queryWrapper = new LambdaQueryWrapper<>();
queryWrapper.like(SysUser::getUsername, keyword);
queryWrapper.eq(SysUser::getStatus, 1);

// âŒ é”™è¯¯ï¼šé¿å…å­—ç¬¦ä¸²æ‹¼æ¥
QueryWrapper<SysUser> queryWrapper = new QueryWrapper<>();
queryWrapper.like("username", keyword);  // ä¸æ¨è
```

#### 6.2 ä½¿ç”¨å·¥å…·ç±»

```java
// æ—¶é—´èŒƒå›´æŸ¥è¯¢
QueryHelper.applyTimeRange(queryWrapper, startTime, endTime, SysUser::getCreateTime);

// æœç´¢å…³é”®è¯å¤„ç†
QueryHelper.applySearch(
        queryWrapper,
        SearchQueryConfig.<SysUser>of(search)
                .searchField(SysUser::getUsername)
                .searchField(SysUser::getRealName)
                .fallbackField(SysUser::getUsername, username)
                .fallbackField(SysUser::getRealName, realName)
);

// Limit é™åˆ¶
List<UserVO> users = QueryHelper.applyLimit(users, limit);
```

#### 6.3 é€»è¾‘åˆ é™¤

**Entity ä¸­ä½¿ç”¨ `@TableLogic`**ï¼š

```java
@TableLogic
private Integer deleted;
```

**æŸ¥è¯¢æ—¶è‡ªåŠ¨è¿‡æ»¤ deleted=1 çš„è®°å½•ï¼Œåˆ é™¤æ—¶è‡ªåŠ¨æ›´æ–° deleted=1ï¼Œä¸ç‰©ç†åˆ é™¤**

### 7. å¼‚å¸¸å¤„ç†è§„èŒƒ

#### 7.1 ç»Ÿä¸€å¼‚å¸¸å¤„ç†

**å…¨å±€å¼‚å¸¸å¤„ç†å™¨**ï¼š

```java
@RestControllerAdvice
public class GlobalExceptionHandler {

    @ExceptionHandler(BusinessException.class)
    public BaseResult<?> handleBusinessException(BusinessException e) {
        return BaseResult.error(e.getMessage());
    }

    @ExceptionHandler(MethodArgumentNotValidException.class)
    public BaseResult<?> handleValidationException(MethodArgumentNotValidException e) {
        // å‚æ•°æ ¡éªŒå¼‚å¸¸å¤„ç†
    }
}
```

#### 7.2 ä¸šåŠ¡å¼‚å¸¸

**ä½¿ç”¨ `BusinessException`**ï¼š

```java
if (user == null) {
    throw new BusinessException("ç”¨æˆ·ä¸å­˜åœ¨");
}

if (count > 0) {
    throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");
}
```

**è§„èŒƒ**ï¼š

- å¼‚å¸¸æ¶ˆæ¯è¦æ¸…æ™°æ˜ç¡®
- ä½¿ç”¨ä¸­æ–‡é”™è¯¯æ¶ˆæ¯ï¼ˆä¾¿äºå‰ç«¯æ˜¾ç¤ºï¼‰
- ä¸è¦æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯

### 8. å‚æ•°æ ¡éªŒè§„èŒƒ

#### 8.1 Bean Validation

**DTO ä¸­ä½¿ç”¨æ ¡éªŒæ³¨è§£**ï¼š

```java
@Data
public class UserDTO {

    @NotBlank(message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    @Size(min = 3, max = 20, message = "ç”¨æˆ·åé•¿åº¦å¿…é¡»åœ¨3-20ä¹‹é—´")
    private String username;

    @NotBlank(message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    @Size(min = 6, max = 50, message = "å¯†ç é•¿åº¦å¿…é¡»åœ¨6-50ä¹‹é—´")
    private String password;
}
```

#### 8.2 åˆ†ç»„æ ¡éªŒ

**åˆ›å»ºå’Œæ›´æ–°ä½¿ç”¨ä¸åŒæ ¡éªŒè§„åˆ™**ï¼š

```java
public class UserDTO {

    public interface Create {}
    public interface Update {}

    @NotBlank(groups = Create.class, message = "ç”¨æˆ·åä¸èƒ½ä¸ºç©º")
    private String username;

    @NotBlank(groups = Create.class, message = "å¯†ç ä¸èƒ½ä¸ºç©º")
    private String password;
}

// Controller ä¸­ä½¿ç”¨
@PostMapping
public BaseResult<String> create(@Validated(UserDTO.Create.class) @RequestBody UserDTO userDTO) {
    // ...
}

@PutMapping("/{id}")
public BaseResult<Boolean> update(@PathVariable String id, @Validated(UserDTO.Update.class) @RequestBody UserDTO userDTO) {
    // ...
}
```

---

## æ¶æ„è®¾è®¡æ¨¡å¼

### 1. åˆ†å±‚æ¶æ„

```
HTTP è¯·æ±‚
  â†“
Controller å±‚ï¼ˆå‚æ•°æ ¡éªŒã€è·¯ç”±æ˜ å°„ï¼‰
  â†“
Service å±‚ï¼ˆä¸šåŠ¡é€»è¾‘å¤„ç†ï¼‰
  â†“
Mapper å±‚ï¼ˆæ•°æ®åº“æ“ä½œï¼‰
  â†“
Databaseï¼ˆMySQLï¼‰
  â†“
è¿”å›ç»“æœï¼ˆç»Ÿä¸€æ ¼å¼ BaseResult<T>ï¼‰
```

### 2. è®¾è®¡æ¨¡å¼åº”ç”¨

#### 2.1 ä¾èµ–æ³¨å…¥ï¼ˆDIï¼‰

**ä½¿ç”¨ `@RequiredArgsConstructor`**ï¼š

```java
@Service
@RequiredArgsConstructor
public class UserServiceImpl implements UserService {

    private final UserMapper userMapper;
    private final PasswordEncoder passwordEncoder;
    // é€šè¿‡æ„é€ å‡½æ•°è‡ªåŠ¨æ³¨å…¥
}
```

#### 2.2 ç­–ç•¥æ¨¡å¼

**æœç´¢ç­–ç•¥**ï¼ˆ`QueryHelper.applySearch()`ï¼‰ï¼š

```java
// æ”¯æŒå¤šç§æœç´¢ç­–ç•¥
QueryHelper.applySearch(
        queryWrapper,
        SearchQueryConfig.<SysUser>of(search)
                .searchField(SysUser::getUsername)      // æ¨¡ç³Šæœç´¢
                .exactIdField(SysUser::getId, id)       // ç²¾ç¡®åŒ¹é…
                .fallbackField(SysUser::getUsername, username)  // å›é€€å­—æ®µ
);
```

#### 2.3 æ¨¡æ¿æ–¹æ³•æ¨¡å¼

**æ ‘å½¢ç»“æ„æ„å»º**ï¼ˆ`TreeHelper.buildTree()`ï¼‰ï¼š

```java
// é€šç”¨çš„æ ‘å½¢ç»“æ„æ„å»ºæ–¹æ³•
List<MenuVO> menuTree = TreeHelper.buildTree(
        menuVOs,
        MenuVO::getId,
        MenuVO::getPid,
        MenuVO::getChildren,
        MenuVO::setChildren,
        TreeHelper.ROOT_ID
);
```

#### 2.4 AOP åˆ‡é¢ç¼–ç¨‹

**æ“ä½œæ—¥å¿—åˆ‡é¢**ï¼ˆ`OperationLogAspect`ï¼‰ï¼š

```java
@Aspect
@Component
public class OperationLogAspect {

    @Around("@annotation(operationLog)")
    public Object around(ProceedingJoinPoint point, OperationLog operationLog) {
        // è®°å½•æ“ä½œæ—¥å¿—
    }
}
```

---

## åç»­å¼€å‘æ¨¡å¼

### 1. æ–°åŠŸèƒ½å¼€å‘æµç¨‹

#### 1.1 åˆ›å»ºæ–°æ¨¡å—ï¼ˆä»¥ "é€šçŸ¥" æ¨¡å—ä¸ºä¾‹ï¼‰

**æ­¥éª¤ 1ï¼šåˆ›å»º Entity**

```java
// model/entity/SysNotice.java
@Data
@TableName("sys_notice")
public class SysNotice {
    @TableId(type = IdType.ASSIGN_ID)
    private String id;

    private String title;
    private String content;
    private Integer status;

    @TableLogic
    private Integer deleted;

    private LocalDateTime createTime;
    private LocalDateTime updateTime;
}
```

**æ­¥éª¤ 2ï¼šåˆ›å»º DTO**

```java
// model/dto/NoticeDTO.java
@Data
@Schema(description = "é€šçŸ¥DTO")
public class NoticeDTO {

    @Schema(description = "æ ‡é¢˜", example = "ç³»ç»Ÿé€šçŸ¥")
    @NotBlank(message = "æ ‡é¢˜ä¸èƒ½ä¸ºç©º")
    private String title;

    @Schema(description = "å†…å®¹", example = "è¿™æ˜¯ä¸€æ¡ç³»ç»Ÿé€šçŸ¥")
    @NotBlank(message = "å†…å®¹ä¸èƒ½ä¸ºç©º")
    private String content;

    @Schema(description = "çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰", example = "1")
    private Integer status;
}
```

**æ­¥éª¤ 3ï¼šåˆ›å»º VO**

```java
// model/vo/NoticeVO.java
@Data
@Schema(description = "é€šçŸ¥VO")
public class NoticeVO {

    @Schema(description = "é€šçŸ¥ID")
    private String id;

    @Schema(description = "æ ‡é¢˜")
    private String title;

    @Schema(description = "å†…å®¹")
    private String content;

    @Schema(description = "çŠ¶æ€")
    private Integer status;

    @Schema(description = "åˆ›å»ºæ—¶é—´")
    private LocalDateTime createTime;
}
```

**æ­¥éª¤ 4ï¼šåˆ›å»º Mapper**

```java
// mapper/NoticeMapper.java
@Mapper
public interface NoticeMapper extends BaseMapper<SysNotice> {
    // è‡ªå®šä¹‰æŸ¥è¯¢æ–¹æ³•ï¼ˆå¦‚æœéœ€è¦ï¼‰
}
```

**æ­¥éª¤ 5ï¼šåˆ›å»º Service æ¥å£**

```java
// service/NoticeService.java
public interface NoticeService {

    /**
     * è·å–é€šçŸ¥åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
     */
    PageResult<NoticeVO> getNoticeList(Integer page, Integer pageSize, String search, Integer status);

    /**
     * è·å–é€šçŸ¥è¯¦æƒ…
     */
    NoticeVO getNoticeById(String id);

    /**
     * åˆ›å»ºé€šçŸ¥
     */
    String createNotice(NoticeDTO noticeDTO);

    /**
     * æ›´æ–°é€šçŸ¥
     */
    void updateNotice(String id, NoticeDTO noticeDTO);

    /**
     * åˆ é™¤é€šçŸ¥
     */
    void deleteNotice(String id);
}
```

**æ­¥éª¤ 6ï¼šåˆ›å»º Service å®ç°**

```java
// service/impl/NoticeServiceImpl.java
@Service
@RequiredArgsConstructor
public class NoticeServiceImpl implements NoticeService {

    private final NoticeMapper noticeMapper;

    @Override
    public PageResult<NoticeVO> getNoticeList(Integer page, Integer pageSize, String search, Integer status) {
        // æ„å»ºæŸ¥è¯¢æ¡ä»¶
        LambdaQueryWrapper<SysNotice> queryWrapper = new LambdaQueryWrapper<>();

        // æœç´¢å…³é”®è¯å¤„ç†
        QueryHelper.applySearch(
                queryWrapper,
                SearchQueryConfig.<SysNotice>of(search)
                        .searchField(SysNotice::getTitle)
                        .searchField(SysNotice::getContent)
        );

        // çŠ¶æ€è¿‡æ»¤
        if (status != null) {
            queryWrapper.eq(SysNotice::getStatus, status);
        }

        queryWrapper.orderByDesc(SysNotice::getCreateTime);

        // åˆ†é¡µæŸ¥è¯¢
        Page<SysNotice> pageParam = new Page<>(page, pageSize);
        IPage<SysNotice> pageResult = noticeMapper.selectPage(pageParam, queryWrapper);

        // è½¬æ¢ä¸ºVO
        List<NoticeVO> voList = pageResult.getRecords().stream()
                .map(this::convertToVO)
                .collect(Collectors.toList());

        return PageResult.of(voList, pageResult.getTotal());
    }

    @Override
    public NoticeVO getNoticeById(String id) {
        SysNotice notice = getNoticeByIdOrThrow(id);
        return convertToVO(notice);
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public String createNotice(NoticeDTO noticeDTO) {
        // åˆ›å»ºé€šçŸ¥å®ä½“
        SysNotice notice = buildNoticeEntity(noticeDTO, null);
        noticeMapper.insert(notice);
        return notice.getId();
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public void updateNotice(String id, NoticeDTO noticeDTO) {
        // æŸ¥è¯¢é€šçŸ¥
        SysNotice notice = getNoticeByIdOrThrow(id);

        // æ›´æ–°é€šçŸ¥ä¿¡æ¯
        updateNoticeBasicInfo(notice, noticeDTO);
        noticeMapper.updateById(notice);
    }

    @Override
    @Transactional(rollbackFor = Exception.class)
    public void deleteNotice(String id) {
        // æŸ¥è¯¢é€šçŸ¥ï¼ˆéªŒè¯å­˜åœ¨æ€§ï¼‰
        getNoticeByIdOrThrow(id);

        // é€»è¾‘åˆ é™¤
        noticeMapper.deleteById(id);
    }

    // ========== ç§æœ‰æ–¹æ³• ==========

    /**
     * æ ¹æ®IDè·å–é€šçŸ¥ï¼Œå¦‚æœä¸å­˜åœ¨åˆ™æŠ›å‡ºå¼‚å¸¸
     */
    private SysNotice getNoticeByIdOrThrow(String id) {
        SysNotice notice = noticeMapper.selectById(id);
        if (notice == null) {
            throw new BusinessException("é€šçŸ¥ä¸å­˜åœ¨");
        }
        return notice;
    }

    /**
     * æ„å»ºé€šçŸ¥å®ä½“
     */
    private SysNotice buildNoticeEntity(NoticeDTO noticeDTO, String id) {
        SysNotice notice = new SysNotice();
        notice.setTitle(noticeDTO.getTitle());
        notice.setContent(noticeDTO.getContent());
        notice.setStatus(noticeDTO.getStatus() != null ? noticeDTO.getStatus() : 1);
        return notice;
    }

    /**
     * æ›´æ–°é€šçŸ¥åŸºæœ¬ä¿¡æ¯
     */
    private void updateNoticeBasicInfo(SysNotice notice, NoticeDTO noticeDTO) {
        if (StringUtils.hasText(noticeDTO.getTitle())) {
            notice.setTitle(noticeDTO.getTitle());
        }
        if (StringUtils.hasText(noticeDTO.getContent())) {
            notice.setContent(noticeDTO.getContent());
        }
        if (noticeDTO.getStatus() != null) {
            notice.setStatus(noticeDTO.getStatus());
        }
    }

    /**
     * è½¬æ¢ä¸ºVO
     */
    private NoticeVO convertToVO(SysNotice notice) {
        NoticeVO vo = new NoticeVO();
        BeanUtils.copyProperties(notice, vo);
        return vo;
    }
}
```

**æ­¥éª¤ 7ï¼šåˆ›å»º Controller**

```java
// controller/NoticeController.java
@Tag(name = "ç³»ç»Ÿé€šçŸ¥ç®¡ç†")
@RestController
@RequestMapping("/system/notice")
@RequiredArgsConstructor
public class NoticeController {

    private final NoticeService noticeService;

    @Operation(summary = "è·å–é€šçŸ¥åˆ—è¡¨", description = "è·å–é€šçŸ¥åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œæœç´¢ï¼‰")
    @GetMapping
    public BaseResult<PageResult<NoticeVO>> getList(
            @Parameter(description = "é¡µç ï¼Œä»1å¼€å§‹", example = "1")
            @RequestParam(required = false, defaultValue = "1") Integer page,
            @Parameter(description = "æ¯é¡µå¤§å°", example = "20")
            @RequestParam(required = false, defaultValue = "20") Integer pageSize,
            @Parameter(description = "æœç´¢å…³é”®è¯")
            @RequestParam(required = false) String search,
            @Parameter(description = "çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰")
            @RequestParam(required = false) Integer status) {
        PageResult<NoticeVO> result = noticeService.getNoticeList(page, pageSize, search, status);
        return new BaseResult<>(result);
    }

    @Operation(summary = "è·å–é€šçŸ¥è¯¦æƒ…", description = "æ ¹æ®IDè·å–é€šçŸ¥è¯¦ç»†ä¿¡æ¯")
    @GetMapping("/{id}")
    public BaseResult<NoticeVO> getById(@PathVariable String id) {
        NoticeVO notice = noticeService.getNoticeById(id);
        return new BaseResult<>(notice);
    }

    @Operation(summary = "åˆ›å»ºé€šçŸ¥", description = "åˆ›å»ºæ–°é€šçŸ¥")
    @PostMapping
    public BaseResult<String> create(@Validated(NoticeDTO.Create.class) @RequestBody NoticeDTO noticeDTO) {
        String id = noticeService.createNotice(noticeDTO);
        return new BaseResult<>(id);
    }

    @Operation(summary = "æ›´æ–°é€šçŸ¥", description = "æ›´æ–°é€šçŸ¥ä¿¡æ¯")
    @PutMapping("/{id}")
    public BaseResult<Boolean> update(@PathVariable String id, @Validated(NoticeDTO.Update.class) @RequestBody NoticeDTO noticeDTO) {
        noticeService.updateNotice(id, noticeDTO);
        return new BaseResult<>(true);
    }

    @Operation(summary = "åˆ é™¤é€šçŸ¥", description = "åˆ é™¤é€šçŸ¥ï¼ˆé€»è¾‘åˆ é™¤ï¼‰")
    @DeleteMapping("/{id}")
    public BaseResult<Boolean> delete(@PathVariable String id) {
        noticeService.deleteNotice(id);
        return new BaseResult<>(true);
    }
}
```

**æ­¥éª¤ 8ï¼šåˆ›å»ºæ•°æ®åº“è¡¨**

```sql
-- src/main/resources/db/modules/notice/notice-schema.sql
CREATE TABLE IF NOT EXISTS `sys_notice` (
    `id` VARCHAR(64) NOT NULL COMMENT 'ä¸»é”®ID',
    `title` VARCHAR(200) NOT NULL COMMENT 'æ ‡é¢˜',
    `content` TEXT NOT NULL COMMENT 'å†…å®¹',
    `status` TINYINT(1) NOT NULL DEFAULT 1 COMMENT 'çŠ¶æ€ï¼ˆ0-ç¦ç”¨ï¼Œ1-å¯ç”¨ï¼‰',
    `deleted` TINYINT(1) NOT NULL DEFAULT 0 COMMENT 'åˆ é™¤æ ‡å¿—ï¼ˆ0-æœªåˆ é™¤ï¼Œ1-å·²åˆ é™¤ï¼‰',
    `create_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
    `update_time` DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
    PRIMARY KEY (`id`),
    KEY `idx_status` (`status`),
    KEY `idx_create_time` (`create_time`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç³»ç»Ÿé€šçŸ¥è¡¨';
```

### 2. ä»£ç å®¡æŸ¥æ¸…å•

#### 2.1 Controller å±‚å®¡æŸ¥

- [ ] æ˜¯å¦ä½¿ç”¨ `@RequiredArgsConstructor` è¿›è¡Œä¾èµ–æ³¨å…¥
- [ ] æ˜¯å¦ç»Ÿä¸€è¿”å› `BaseResult<T>`
- [ ] æ˜¯å¦ä½¿ç”¨ RESTful è·¯ç”±è®¾è®¡
- [ ] æ˜¯å¦ä½¿ç”¨ `@Validated` è¿›è¡Œå‚æ•°æ ¡éªŒ
- [ ] æ˜¯å¦æ·»åŠ  Swagger æ³¨è§£ï¼ˆ`@Api`ã€`@Operation`ã€`@Parameter`ã€`@Schema`ï¼‰

#### 2.2 Service å±‚å®¡æŸ¥

- [ ] æ˜¯å¦æå– `getXxxByIdOrThrow()` æ–¹æ³•
- [ ] æ˜¯å¦æå–éªŒè¯æ–¹æ³•ï¼ˆ`validateXxx()`ã€`checkXxx()`ï¼‰
- [ ] æ˜¯å¦æå–æ„å»ºæ–¹æ³•ï¼ˆ`buildXxxEntity()`ï¼‰
- [ ] æ˜¯å¦æå–æ›´æ–°æ–¹æ³•ï¼ˆ`updateXxxBasicInfo()`ï¼‰
- [ ] æ˜¯å¦ä½¿ç”¨ `@Transactional` æ ‡æ³¨å†™æ“ä½œ
- [ ] æ˜¯å¦ä½¿ç”¨å·¥å…·ç±»ï¼ˆ`QueryHelper`ã€`TreeHelper` ç­‰ï¼‰

#### 2.3 Mapper å±‚å®¡æŸ¥

- [ ] æ˜¯å¦ç»§æ‰¿ `BaseMapper<T>`
- [ ] æ˜¯å¦ä½¿ç”¨ `LambdaQueryWrapper` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
- [ ] æ˜¯å¦ä½¿ç”¨é€»è¾‘åˆ é™¤ï¼ˆ`@TableLogic`ï¼‰

#### 2.4 Model å±‚å®¡æŸ¥

- [ ] Entity æ˜¯å¦ä½¿ç”¨ `@TableName` å’Œ `@TableId`
- [ ] Entity æ˜¯å¦ä½¿ç”¨ `@TableLogic` æ ‡æ³¨é€»è¾‘åˆ é™¤å­—æ®µ
- [ ] DTO æ˜¯å¦ä½¿ç”¨ `@Schema` æ³¨è§£
- [ ] DTO æ˜¯å¦ä½¿ç”¨ Bean Validation æ³¨è§£
- [ ] VO æ˜¯å¦åªåŒ…å«éœ€è¦è¿”å›ç»™å‰ç«¯çš„å­—æ®µ

### 3. æµ‹è¯•è§„èŒƒ

#### 3.1 å•å…ƒæµ‹è¯•

```java
@SpringBootTest
@AutoConfigureMockMvc
class NoticeControllerTest {

    @Autowired
    private MockMvc mockMvc;

    @Test
    void testGetNoticeList() throws Exception {
        mockMvc.perform(get("/system/notice")
                        .param("page", "1")
                        .param("pageSize", "20"))
                .andExpect(status().isOk())
                .andExpect(jsonPath("$.code").value(0));
    }
}
```

#### 3.2 é›†æˆæµ‹è¯•

```java
@SpringBootTest
@Transactional
class NoticeServiceTest {

    @Autowired
    private NoticeService noticeService;

    @Test
    void testCreateNotice() {
        NoticeDTO noticeDTO = new NoticeDTO();
        noticeDTO.setTitle("æµ‹è¯•é€šçŸ¥");
        noticeDTO.setContent("è¿™æ˜¯ä¸€æ¡æµ‹è¯•é€šçŸ¥");

        String id = noticeService.createNotice(noticeDTO);
        assertNotNull(id);

        NoticeVO notice = noticeService.getNoticeById(id);
        assertEquals("æµ‹è¯•é€šçŸ¥", notice.getTitle());
    }
}
```

---

## æœ€ä½³å®è·µå»ºè®®

### 1. ä»£ç è´¨é‡

#### 1.1 éµå¾ª DRY åŸåˆ™

- âœ… æå–å…¬å…±æ–¹æ³•ï¼Œé¿å…é‡å¤ä»£ç 
- âœ… ä½¿ç”¨å·¥å…·ç±»ï¼ˆ`QueryHelper`ã€`TreeHelper` ç­‰ï¼‰
- âœ… ä½¿ç”¨å¸¸é‡å®šä¹‰é­”æ³•å­—ç¬¦ä¸²

#### 1.2 ä¿æŒæ–¹æ³•ç®€æ´

- âœ… æ–¹æ³•èŒè´£å•ä¸€ï¼Œé€»è¾‘æ¸…æ™°
- âœ… æ–¹æ³•é•¿åº¦æ§åˆ¶åœ¨ 50 è¡Œä»¥å†…
- âœ… å¤æ‚é€»è¾‘æå–ä¸ºç§æœ‰æ–¹æ³•

#### 1.3 ç±»å‹å®‰å…¨

- âœ… ä½¿ç”¨ `LambdaQueryWrapper` è€Œä¸æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥
- âœ… ä½¿ç”¨æ³›å‹æé«˜ä»£ç å¤ç”¨æ€§
- âœ… é¿å…ä½¿ç”¨ `any` ç±»å‹ï¼ˆJava ä¸­å¯¹åº” `Object`ï¼‰

### 2. æ€§èƒ½ä¼˜åŒ–

#### 2.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

- âœ… ä½¿ç”¨ç´¢å¼•ï¼ˆåœ¨æ•°æ®åº“è¡¨è®¾è®¡ä¸­æ·»åŠ åˆé€‚çš„ç´¢å¼•ï¼‰
- âœ… é¿å… N+1 æŸ¥è¯¢é—®é¢˜ï¼ˆä½¿ç”¨æ‰¹é‡æŸ¥è¯¢ï¼‰
- âœ… ä½¿ç”¨åˆ†é¡µæŸ¥è¯¢ï¼Œé¿å…ä¸€æ¬¡æ€§åŠ è½½å¤§é‡æ•°æ®

#### 2.2 ç¼“å­˜ç­–ç•¥

- âœ… å¯¹äºé¢‘ç¹æŸ¥è¯¢çš„æ•°æ®ï¼Œè€ƒè™‘ä½¿ç”¨ Redis ç¼“å­˜
- âœ… ç¼“å­˜è¿‡æœŸæ—¶é—´è®¾ç½®åˆç†
- âœ… ç¼“å­˜æ›´æ–°ç­–ç•¥ï¼ˆCache-Asideã€Write-Through ç­‰ï¼‰

### 3. å®‰å…¨è§„èŒƒ

#### 3.1 è®¤è¯æˆæƒ

- âœ… æ‰€æœ‰æ¥å£ï¼ˆé™¤ç™»å½•ã€æ³¨å†Œå¤–ï¼‰éƒ½éœ€è¦è®¤è¯
- âœ… ä½¿ç”¨ JWT Token è¿›è¡Œæ— çŠ¶æ€è®¤è¯
- âœ… Token è¿‡æœŸæ—¶é—´è®¾ç½®åˆç†ï¼ˆAccessToken 2å°æ—¶ï¼ŒRefreshToken 7å¤©ï¼‰

#### 3.2 æ•°æ®å®‰å…¨

- âœ… å¯†ç ä½¿ç”¨ BCrypt åŠ å¯†å­˜å‚¨
- âœ… æ•æ„Ÿä¿¡æ¯ï¼ˆå¦‚å¯†ç ï¼‰ä¸åœ¨æ—¥å¿—ä¸­è¾“å‡º
- âœ… ä½¿ç”¨ `SensitiveDataFilter` è¿‡æ»¤æ•æ„Ÿæ•°æ®

#### 3.3 SQL æ³¨å…¥é˜²æŠ¤

- âœ… ä½¿ç”¨ `LambdaQueryWrapper` è¿›è¡Œç±»å‹å®‰å…¨çš„æŸ¥è¯¢
- âœ… é¿å…ç›´æ¥æ‹¼æ¥ SQL å­—ç¬¦ä¸²
- âœ… ä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢

### 4. å¯ç»´æŠ¤æ€§

#### 4.1 ä»£ç æ³¨é‡Š

- âœ… ç±»å’Œæ–¹æ³•æ·»åŠ  JavaDoc æ³¨é‡Š
- âœ… å¤æ‚é€»è¾‘æ·»åŠ è¡Œå†…æ³¨é‡Š
- âœ… å¸¸é‡æ·»åŠ æ³¨é‡Šè¯´æ˜

#### 4.2 æ—¥å¿—è§„èŒƒ

- âœ… ä½¿ç”¨ `@Slf4j` æ³¨è§£
- âœ… å…³é”®æ“ä½œè®°å½•æ—¥å¿—ï¼ˆINFO çº§åˆ«ï¼‰
- âœ… å¼‚å¸¸è®°å½•é”™è¯¯æ—¥å¿—ï¼ˆERROR çº§åˆ«ï¼‰
- âœ… é¿å…åœ¨æ—¥å¿—ä¸­è¾“å‡ºæ•æ„Ÿä¿¡æ¯

#### 4.3 å¼‚å¸¸å¤„ç†

- âœ… ä½¿ç”¨ç»Ÿä¸€çš„å¼‚å¸¸å¤„ç†ï¼ˆ`GlobalExceptionHandler`ï¼‰
- âœ… å¼‚å¸¸æ¶ˆæ¯æ¸…æ™°æ˜ç¡®ï¼Œä½¿ç”¨ä¸­æ–‡
- âœ… ä¸è¦æš´éœ²ç³»ç»Ÿå†…éƒ¨ä¿¡æ¯

### 5. æ‰©å±•æ€§

#### 5.1 æ¥å£è®¾è®¡

- âœ… æ¥å£è®¾è®¡è€ƒè™‘æœªæ¥æ‰©å±•
- âœ… ä½¿ç”¨ DTO å°è£…å‚æ•°ï¼Œä¾¿äºåç»­æ·»åŠ å­—æ®µ
- âœ… ä½¿ç”¨ VO è¿”å›æ•°æ®ï¼Œä¾¿äºåç»­æ·»åŠ å­—æ®µ

#### 5.2 æ¨¡å—åŒ–è®¾è®¡

- âœ… åŠŸèƒ½æ¨¡å—åŒ–ï¼Œä¾¿äºç‹¬ç«‹å¼€å‘å’Œæµ‹è¯•
- âœ… ä½¿ç”¨ Service æ¥å£å’Œå®ç°åˆ†ç¦»
- âœ… å·¥å…·ç±»ç»Ÿä¸€æ”¾åœ¨ `core/utils/` ç›®å½•

---

## æ€»ç»“

### æŠ€æœ¯æ ˆç‰¹ç‚¹

1. **æˆç†Ÿç¨³å®š**ï¼šSpring Boot 3.2.0 + Java 17ï¼ˆLTS ç‰ˆæœ¬ï¼‰
2. **é«˜æ•ˆå¼€å‘**ï¼šMyBatis Plus + Lombok å‡å°‘æ ·æ¿ä»£ç 
3. **å®‰å…¨å¯é **ï¼šSpring Security + JWT æ— çŠ¶æ€è®¤è¯
4. **æ˜“äºç»´æŠ¤**ï¼šåˆ†å±‚æ¶æ„æ¸…æ™°ï¼Œä»£ç è§„èŒƒç»Ÿä¸€

### ä»£ç è§„èŒƒç‰¹ç‚¹

1. **å‘½åç»Ÿä¸€**ï¼šä¸šåŠ¡åç§°å®Œå…¨ä¸€è‡´ï¼Œä¾¿äºç†è§£å’Œç»´æŠ¤
2. **ç»“æ„æ¸…æ™°**ï¼šåˆ†å±‚æ¶æ„ï¼ŒèŒè´£æ˜ç¡®
3. **ä¼˜åŒ–æ¨¡å¼**ï¼šService å±‚éµå¾ªç»Ÿä¸€çš„ä¼˜åŒ–æ¨¡å¼
4. **å·¥å…·å¤ç”¨**ï¼šå·¥å…·ç±»ç»Ÿä¸€ç®¡ç†ï¼Œå‡å°‘é‡å¤ä»£ç 

### åç»­å¼€å‘å»ºè®®

1. **éµå¾ªè§„èŒƒ**ï¼šä¸¥æ ¼æŒ‰ç…§å‘½åè§„èŒƒå’Œä»£ç è§„èŒƒå¼€å‘
2. **ä»£ç å®¡æŸ¥**ï¼šä½¿ç”¨ä»£ç å®¡æŸ¥æ¸…å•ç¡®ä¿ä»£ç è´¨é‡
3. **æŒç»­ä¼˜åŒ–**ï¼šå®šæœŸé‡æ„ä»£ç ï¼Œæå–å…¬å…±æ–¹æ³•
4. **æ–‡æ¡£æ›´æ–°**ï¼šåŠæ—¶æ›´æ–°æŠ€æœ¯æ–‡æ¡£å’Œå¼€å‘è§„èŒƒ

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv2.0  
**æœ€åæ›´æ–°**ï¼š2026å¹´ï¼ˆå·²å‡çº§è‡³ Spring Boot 3.2.0 + Java 17ï¼‰  
**ç»´æŠ¤è€…**ï¼šVben Admin å›¢é˜Ÿ
