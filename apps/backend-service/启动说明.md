# åº”ç”¨å¯åŠ¨è¯´æ˜

## ğŸ“‹ å‰ç½®æ¡ä»¶

1. **MySQL å·²å¯åŠ¨å¹¶è¿è¡Œ**

   ```bash
   # æ£€æŸ¥ MySQL å®¹å™¨çŠ¶æ€
   docker ps | grep mysql-vben

   # å¦‚æœæœªè¿è¡Œï¼Œå¯åŠ¨ MySQL å®¹å™¨
   docker start mysql-vben
   ```

2. **æ•°æ®åº“å·²åˆå§‹åŒ–**

   ```bash
   cd apps/backend-service
   # ä½¿ç”¨ä¸€é”®åˆå§‹åŒ–è„šæœ¬ï¼ˆDocker MySQLï¼‰
   ./src/main/resources/db/init.sh

   # æˆ–è€…æ‰‹åŠ¨æ‰§è¡Œï¼ˆæœ¬åœ° MySQLï¼‰
   mysql -uroot -proot < src/main/resources/db/schema.sql
   mysql -uroot -proot --default-character-set=utf8mb4 vben_admin < src/main/resources/db/data.sql
   ```

   è¯¦ç»†è¯´æ˜è¯·å‚è€ƒï¼š[æ•°æ®åº“åˆå§‹åŒ–æ–‡æ¡£](src/main/resources/db/README.md)

3. **Java 11 å·²å®‰è£…**

   ```bash
   java -version
   ```

4. **ç«¯å£ 8080 æœªè¢«å ç”¨**
   ```bash
   lsof -ti:8080
   ```

## ğŸš€ å¯åŠ¨æ–¹å¼

### å‰å°å¯åŠ¨ï¼ˆæ¨èç”¨äºå¼€å‘è°ƒè¯•ï¼‰

å‰å°å¯åŠ¨å¯ä»¥çœ‹åˆ°å®Œæ•´çš„å¯åŠ¨æ—¥å¿—ï¼Œæ–¹ä¾¿è°ƒè¯•å’Œæ’æŸ¥é—®é¢˜ã€‚

#### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Maven å¯åŠ¨ï¼ˆæ¨èï¼‰â­

```bash
cd apps/backend-service
JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.29/libexec/openjdk.jdk/Contents/Home
JAVA_HOME=$JAVA_HOME mvn spring-boot:run
```

**ä¼˜ç‚¹ï¼š**

- è‡ªåŠ¨æ£€æµ‹ä»£ç å˜æ›´ï¼Œæ”¯æŒçƒ­é‡è½½ï¼ˆéœ€è¦é…ç½® `spring-boot-devtools`ï¼‰
- æ— éœ€æ‰‹åŠ¨æ‰“åŒ…ï¼ŒMaven ä¼šè‡ªåŠ¨ç¼–è¯‘
- å¯åŠ¨é€Ÿåº¦å¿«ï¼Œé€‚åˆå¼€å‘è°ƒè¯•

#### æ–¹å¼äºŒï¼šä½¿ç”¨ Java å‘½ä»¤ç›´æ¥å¯åŠ¨

```bash
cd apps/backend-service
JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.29/libexec/openjdk.jdk/Contents/Home

# å…ˆæ‰“åŒ…
JAVA_HOME=$JAVA_HOME mvn clean package -DskipTests

# å¯åŠ¨
$JAVA_HOME/bin/java -jar target/backend-service-1.0.0-SNAPSHOT.jar
```

### åœæ­¢åº”ç”¨

åœ¨å‰å°å¯åŠ¨çš„ç»ˆç«¯ä¸­æŒ‰ `Ctrl+C` å³å¯åœæ­¢åº”ç”¨ã€‚

## ğŸ”„ åå°å¯åŠ¨ï¼ˆç”¨äºç”Ÿäº§ç¯å¢ƒï¼‰

### æ–¹å¼ä¸€ï¼šä½¿ç”¨ Maven å¯åŠ¨ï¼ˆæ¨èï¼‰â­

```bash
cd apps/backend-service
JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.29/libexec/openjdk.jdk/Contents/Home
nohup JAVA_HOME=$JAVA_HOME mvn spring-boot:run > target/app.log 2>&1 &
echo $! > target/app.pid
echo "åº”ç”¨å·²å¯åŠ¨ï¼ŒPID: $(cat target/app.pid)"
```

### æ–¹å¼äºŒï¼šä½¿ç”¨ Java å‘½ä»¤å¯åŠ¨

```bash
cd apps/backend-service
JAVA_HOME=/opt/homebrew/Cellar/openjdk@11/11.0.29/libexec/openjdk.jdk/Contents/Home

# å…ˆæ‰“åŒ…
JAVA_HOME=$JAVA_HOME mvn clean package -DskipTests

# åå°å¯åŠ¨
nohup $JAVA_HOME/bin/java -jar target/backend-service-1.0.0-SNAPSHOT.jar > target/app.log 2>&1 &
echo $! > target/app.pid
echo "åº”ç”¨å·²å¯åŠ¨ï¼ŒPID: $(cat target/app.pid)"
```

### åœæ­¢åå°åº”ç”¨

```bash
# æ–¹å¼ä¸€ï¼šä½¿ç”¨ PID æ–‡ä»¶
kill $(cat apps/backend-service/target/app.pid)

# æ–¹å¼äºŒï¼šæŸ¥æ‰¾è¿›ç¨‹å¹¶åœæ­¢
pkill -f "backend-service"
```

## âœ… éªŒè¯åº”ç”¨å¯åŠ¨

åº”ç”¨å¯åŠ¨æˆåŠŸåï¼Œä¼šçœ‹åˆ°ç±»ä¼¼ä»¥ä¸‹æ—¥å¿—ï¼š

```
Started BackendServiceApplication in X.XXX seconds (JVM running for X.XXX)
```

ç„¶åå¯ä»¥æµ‹è¯•ç™»å½•æ¥å£ï¼š

```bash
curl -X POST http://localhost:8080/auth/login \
  -H 'Content-Type: application/json' \
  -d '{"username":"admin","password":"admin123"}'
```

## ğŸ§ª æµ‹è¯•æ¥å£

åº”ç”¨å¯åŠ¨åï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•æ¥å£ï¼š

```bash
# 1. ç™»å½•è·å– Token
TOKEN=$(curl -s -X POST http://localhost:8080/auth/login \
  -H 'Content-Type: application/json' \
  -d '{"username":"admin","password":"admin123"}' \
  | python3 -c "import sys, json; data=json.load(sys.stdin); print(data.get('data', {}).get('accessToken', ''))")

# 2. è·å–ç”¨æˆ·ä¿¡æ¯
curl -X GET http://localhost:8080/user/info \
  -H "Authorization: Bearer $TOKEN"

# 3. è·å–æƒé™ç åˆ—è¡¨
curl -X GET http://localhost:8080/auth/codes \
  -H "Authorization: Bearer $TOKEN"

# 4. è·å–æ‰€æœ‰èœå•
curl -X GET http://localhost:8080/menu/all \
  -H "Authorization: Bearer $TOKEN"

# 5. è·å–èœå•åˆ—è¡¨
curl -X GET http://localhost:8080/system/menu/list \
  -H "Authorization: Bearer $TOKEN"

# 6. è·å–è§’è‰²åˆ—è¡¨
curl -X GET http://localhost:8080/system/role/list \
  -H "Authorization: Bearer $TOKEN"

# 7. è·å–éƒ¨é—¨åˆ—è¡¨
curl -X GET http://localhost:8080/system/dept/list \
  -H "Authorization: Bearer $TOKEN"
```

## ğŸ”‘ é»˜è®¤è´¦å·

- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ•°æ®åº“åˆå§‹åŒ–è¯´æ˜](src/main/resources/db/README.md)
- [é¡¹ç›® README](README.md)
